@use 'variables';

.adw-dialog {
  background-color: var(--dialog-bg-color, var(--window-bg-color)); // Use defined var, fallback to window
  color: var(--dialog-fg-color, var(--text-color)); // Use defined var, fallback to text
  border-radius: var(--dialog-border-radius, var(--window-radius, 12px)); // Use defined var
  box-shadow: var(--dialog-box-shadow);
  padding: 0; // Padding handled by inner elements
  width: 90%;
  max-width: 550px;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.95);
  z-index: var(--z-index-dialog, 1050); // Use defined var
  opacity: 0;
  transition: opacity 0.15s ease-out, transform 0.15s ease-out;
  display: flex; // For vertical layout of header, content, actions
  flex-direction: column;
  overflow: hidden; // Prevent content from breaking border-radius

  &.open {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }

  // Styling for a direct .adw-header-bar used as the dialog's header
  > .adw-header-bar {
    flex-shrink: 0;
    border-bottom: 1px solid var(--border-color);
    border-top-left-radius: var(--dialog-border-radius, var(--window-radius, 12px)); // Match dialog's radius
    border-top-right-radius: var(--dialog-border-radius, var(--window-radius, 12px)); // Match dialog's radius
    // Header bar's own padding should be sufficient.
    // Ensure its background color is var(--headerbar-bg-color)
    background-color: var(--headerbar-bg-color); // Explicitly set for dialog context
    // Ensure title within header bar is styled correctly (usually handled by headerbar's own CSS)
     .adw-header-bar__title { // If overriding is needed for dialog header context
        color: var(--headerbar-fg-color); // Ensure it uses headerbar fg
     }
  }

  // Fallback for a simple title if not using a full header bar (demo page uses header bar)
  // .adw-dialog-title {
  //   font-size: var(--font-size-h3);
  //   padding: var(--spacing-m) var(--spacing-l);
  //   font-weight: bold;
  //   color: var(--dialog-fg-color);
  //   border-bottom: 1px solid var(--border-color);
  // }

  .adw-dialog__content {
    padding: var(--spacing-l);
    line-height: 1.6;
    flex-grow: 1; // Allow content to take up available space
    overflow-y: auto; // Make content scrollable if it exceeds dialog height
    // max-height: calc(80vh - 120px); // Example: constrain height relative to viewport, accounting for header/footer
  }

  .adw-dialog__actions {
    display: flex;
    justify-content: flex-end; // Align buttons to the right
    gap: var(--spacing-s); // Standard gap for dialog buttons
    padding: var(--spacing-m) var(--spacing-l);
    border-top: 1px solid var(--border-color);
    background-color: var(--headerbar-bg-color); // Dialog action areas often have a slightly different bg
    border-bottom-left-radius: var(--dialog-border-radius, var(--window-radius, 12px));
    border-bottom-right-radius: var(--dialog-border-radius, var(--window-radius, 12px));
    flex-shrink: 0;

    .adw-button {
      margin-left: 0; // Remove any default left margin from buttons
    }
  }
}

.adw-dialog-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: var(--dialog-backdrop-color, rgba(0,0,0,0.4)); // Use defined var
  z-index: var(--z-index-dialog-backdrop, 1040); // Use defined var
  opacity: 0;
  transition: opacity 0.15s ease-out;

  &.open {
    opacity: 1;
  }
}