// Adwaita Named Colors - https://gnome.pages.gitlab.gnome.org/libadwaita/doc/1.5/named-colors.html
// This file aims to implement these named colors as CSS custom properties.

// GNOME Color Palette (as defined in Adwaita documentation)
:root {
  // Blue
  --adw-blue-1: #99c1f1;
  --adw-blue-2: #62a0ea;
  --adw-blue-3: #3584e4;
  --adw-blue-4: #1c71d8;
  --adw-blue-5: #1a5fb4;
  // Green
  --adw-green-1: #8ff0a4;
  --adw-green-2: #57e389;
  --adw-green-3: #33d17a;
  --adw-green-4: #2ec27e;
  --adw-green-5: #26a269;
  // Yellow
  --adw-yellow-1: #f9f06b;
  --adw-yellow-2: #f8e45c;
  --adw-yellow-3: #f6d32d;
  --adw-yellow-4: #f5c211;
  --adw-yellow-5: #e5a50a;
  // Orange
  --adw-orange-1: #ffbe6f;
  --adw-orange-2: #ffa348;
  --adw-orange-3: #ff7800;
  --adw-orange-4: #e66100;
  --adw-orange-5: #c64600;
  // Red
  --adw-red-1: #f66151;
  --adw-red-2: #ed333b;
  --adw-red-3: #e01b24;
  --adw-red-4: #c01c28;
  --adw-red-5: #a51d2d;
  // Purple
  --adw-purple-1: #dc8add;
  --adw-purple-2: #c061cb;
  --adw-purple-3: #9141ac;
  --adw-purple-4: #813d9c;
  --adw-purple-5: #613583;
  // Brown
  --adw-brown-1: #cdab8f;
  --adw-brown-2: #b5835a;
  --adw-brown-3: #986a44;
  --adw-brown-4: #865e3c;
  --adw-brown-5: #63452c;
  // Light (Greys)
  --adw-light-1: #ffffff;
  --adw-light-2: #f6f5f4;
  --adw-light-3: #deddda;
  --adw-light-4: #c0bfbc;
  --adw-light-5: #9a9996;
  // Dark (Greys)
  --adw-dark-1: #77767b;
  --adw-dark-2: #5e5c64;
  --adw-dark-3: #3d3846;
  --adw-dark-4: #241f31;
  --adw-dark-5: #000000;

  // Teal (Added as per existing variables, ensure these are standard or well-defined)
  --adw-teal-1: #66d9cf;
  --adw-teal-2: #40bfb3;
  --adw-teal-3: #29a698;
  --adw-teal-4: #1f8073;
  --adw-teal-5: #15594e;
  // Pink (Added as per existing variables, ensure these are standard or well-defined)
  --adw-pink-1: #f9aac9;
  --adw-pink-2: #f582ae;
  --adw-pink-3: #f05993;
  --adw-pink-4: #e83178;
  --adw-pink-5: #c41a5f;
}

// Variables for chosen accent colors (to be updated by JS)
:root {
  --chosen-accent-light-color: var(--accent-color-light-default);
  --chosen-accent-light-bg-color: var(--accent-bg-color-light-default);
  --chosen-accent-light-fg-color: var(--accent-fg-color-light-default);
  --chosen-accent-light-hover-bg-color: var(--accent-bg-hover-color-light-default);
  --chosen-accent-light-active-bg-color: var(--accent-bg-active-color-light-default);

  --chosen-accent-dark-color: var(--accent-color-dark-default);
  --chosen-accent-dark-bg-color: var(--accent-bg-color-dark-default);
  --chosen-accent-dark-fg-color: var(--accent-fg-color-dark-default);
  --chosen-accent-dark-hover-bg-color: var(--accent-bg-hover-color-dark-default);
  --chosen-accent-dark-active-bg-color: var(--accent-bg-active-color-dark-default);
}

// Default Accent Colors (Blue)
:root {
  // Light Theme Default Accent (Blue)
  --accent-color-light-default: #1c71d8; // @accent_color Light
  --accent-bg-color-light-default: #3584e4; // @accent_bg_color Light
  --accent-fg-color-light-default: #ffffff; // @accent_fg_color Light
  --accent-bg-hover-color-light-default: #2a70c9; // Custom: darker shade for hover
  --accent-bg-active-color-light-default: #1c58a1; // Custom: even darker for active

  // Dark Theme Default Accent (Blue)
  --accent-color-dark-default: #78aeed; // @accent_color Dark
  --accent-bg-color-dark-default: #3584e4; // @accent_bg_color Dark
  --accent-fg-color-dark-default: #ffffff; // @accent_fg_color Dark
  --accent-bg-hover-color-dark-default: #4a90e2; // Custom: lighter shade for hover
  --accent-bg-active-color-dark-default: #5f9ee5; // Custom: even lighter for active
}

// Definitive Accent Color Variables (for JS to set --chosen-accent-*)
// Each accent color should have its light and dark theme variants defined here.
:root {
  // Blue (already default)
  --accent-blue-light-color: var(--accent-color-light-default);
  --accent-blue-light-bg-color: var(--accent-bg-color-light-default);
  --accent-blue-light-fg-color: var(--accent-fg-color-light-default);
  --accent-blue-light-hover-bg-color: var(--accent-bg-hover-color-light-default);
  --accent-blue-light-active-bg-color: var(--accent-bg-active-color-light-default);

  --accent-blue-dark-color: var(--accent-color-dark-default);
  --accent-blue-dark-bg-color: var(--accent-bg-color-dark-default);
  --accent-blue-dark-fg-color: var(--accent-fg-color-dark-default);
  --accent-blue-dark-hover-bg-color: var(--accent-bg-hover-color-dark-default);
  --accent-blue-dark-active-bg-color: var(--accent-bg-active-color-dark-default);

  // Green
  --accent-green-light-color: #1b8553; // @success_color Light
  --accent-green-light-bg-color: #2ec27e; // @success_bg_color Light
  --accent-green-light-fg-color: #ffffff; // @success_fg_color Light
  --accent-green-light-hover-bg-color: var(--adw-green-5); // Darker shade
  --accent-green-light-active-bg-color: #1f8a5f; // Even darker

  --accent-green-dark-color: #8ff0a4; // @success_color Dark
  --accent-green-dark-bg-color: #26a269; // @success_bg_color Dark
  --accent-green-dark-fg-color: #ffffff; // @success_fg_color Dark
  --accent-green-dark-hover-bg-color: var(--adw-green-4); // Lighter shade
  --accent-green-dark-active-bg-color: var(--adw-green-3); // Even lighter

  // Red (for destructive, but can be an accent)
  --accent-red-light-color: #c01c28; // @destructive_color Light
  --accent-red-light-bg-color: #e01b24; // @destructive_bg_color Light
  --accent-red-light-fg-color: #ffffff; // @destructive_fg_color Light
  --accent-red-light-hover-bg-color: #d0121b; // Darker
  --accent-red-light-active-bg-color: #b00912; // Even darker

  --accent-red-dark-color: #ff7b63; // @destructive_color Dark
  --accent-red-dark-bg-color: #c01c28; // @destructive_bg_color Dark
  --accent-red-dark-fg-color: #ffffff; // @destructive_fg_color Dark
  --accent-red-dark-hover-bg-color: #d02832; // Lighter
  --accent-red-dark-active-bg-color: #e03f49; // Even lighter

  // Yellow
  --accent-yellow-light-color: #9c6e03; // @warning_color Light
  --accent-yellow-light-bg-color: #e5a50a; // @warning_bg_color Light
  --accent-yellow-light-fg-color: rgba(0, 0, 0, 0.8); // @warning_fg_color Light
  --accent-yellow-light-hover-bg-color: #d99809; // Darker
  --accent-yellow-light-active-bg-color: #c08008; // Even darker

  --accent-yellow-dark-color: #f8e45c; // @warning_color Dark
  --accent-yellow-dark-bg-color: #cd9309; // @warning_bg_color Dark
  --accent-yellow-dark-fg-color: rgba(0, 0, 0, 0.8); // @warning_fg_color Dark
  --accent-yellow-dark-hover-bg-color: #dab009; // Lighter
  --accent-yellow-dark-active-bg-color: #e5c00a; // Even lighter

  // Purple
  --accent-purple-light-color: var(--adw-purple-4);
  --accent-purple-light-bg-color: var(--adw-purple-3);
  --accent-purple-light-fg-color: var(--adw-light-1);
  --accent-purple-light-hover-bg-color: var(--adw-purple-4);
  --accent-purple-light-active-bg-color: #70288a; // Darker than purple-4

  --accent-purple-dark-color: var(--adw-purple-1);
  --accent-purple-dark-bg-color: var(--adw-purple-3);
  --accent-purple-dark-fg-color: var(--adw-light-1);
  --accent-purple-dark-hover-bg-color: var(--adw-purple-2);
  --accent-purple-dark-active-bg-color: var(--adw-purple-1);

  // Orange
  --accent-orange-light-color: var(--adw-orange-4);
  --accent-orange-light-bg-color: var(--adw-orange-3);
  --accent-orange-light-fg-color: var(--adw-light-1);
  --accent-orange-light-hover-bg-color: var(--adw-orange-4);
  --accent-orange-light-active-bg-color: var(--adw-orange-5);

  --accent-orange-dark-color: var(--adw-orange-1);
  --accent-orange-dark-bg-color: var(--adw-orange-3);
  --accent-orange-dark-fg-color: var(--adw-light-1);
  --accent-orange-dark-hover-bg-color: var(--adw-orange-2);
  --accent-orange-dark-active-bg-color: var(--adw-orange-1);

  // Teal
  --accent-teal-light-color: var(--adw-teal-4);
  --accent-teal-light-bg-color: var(--adw-teal-3);
  --accent-teal-light-fg-color: var(--adw-light-1);
  --accent-teal-light-hover-bg-color: var(--adw-teal-4);
  --accent-teal-light-active-bg-color: var(--adw-teal-5);

  --accent-teal-dark-color: var(--adw-teal-1);
  --accent-teal-dark-bg-color: var(--adw-teal-3);
  --accent-teal-dark-fg-color: var(--adw-light-1);
  --accent-teal-dark-hover-bg-color: var(--adw-teal-2);
  --accent-teal-dark-active-bg-color: var(--adw-teal-1);

  // Pink
  --accent-pink-light-color: var(--adw-pink-4);
  --accent-pink-light-bg-color: var(--adw-pink-3);
  --accent-pink-light-fg-color: var(--adw-light-1);
  --accent-pink-light-hover-bg-color: var(--adw-pink-4);
  --accent-pink-light-active-bg-color: var(--adw-pink-5);

  --accent-pink-dark-color: var(--adw-pink-1);
  --accent-pink-dark-bg-color: var(--adw-pink-3);
  --accent-pink-dark-fg-color: var(--adw-light-1);
  --accent-pink-dark-hover-bg-color: var(--adw-pink-2);
  --accent-pink-dark-active-bg-color: var(--adw-pink-1);

  // Brown (Slate)
  --accent-brown-light-color: var(--adw-brown-4);
  --accent-brown-light-bg-color: var(--adw-brown-3);
  --accent-brown-light-fg-color: var(--adw-light-1);
  --accent-brown-light-hover-bg-color: var(--adw-brown-4);
  --accent-brown-light-active-bg-color: var(--adw-brown-5);

  --accent-brown-dark-color: var(--adw-brown-1);
  --accent-brown-dark-bg-color: var(--adw-brown-3);
  --accent-brown-dark-fg-color: var(--adw-light-1);
  --accent-brown-dark-hover-bg-color: var(--adw-brown-2);
  --accent-brown-dark-active-bg-color: var(--adw-brown-1);
}


@mixin light-theme {
  // Accent Colors (Dynamically set via --chosen-accent-light-*)
  --accent-color: var(--chosen-accent-light-color);
  --accent-bg-color: var(--chosen-accent-light-bg-color);
  --accent-fg-color: var(--chosen-accent-light-fg-color);
  --accent-bg-hover-color: var(--chosen-accent-light-hover-bg-color);
  --accent-bg-active-color: var(--chosen-accent-light-active-bg-color);

  // Destructive State (Fixed, not affected by accent choice)
  --destructive-color: #c01c28;                     // @destructive_color Light
  --destructive-bg-color: #e01b24;                  // @destructive_bg_color Light
  --destructive-fg-color: #ffffff;                  // @destructive_fg_color Light
  --destructive-bg-hover-color: #d0121b;            // Custom darker shade
  --destructive-bg-active-color: #b00912;           // Custom even darker shade

  // Success State
  --success-color: #1b8553;                         // @success_color Light
  --success-bg-color: #2ec27e;                      // @success_bg_color Light
  --success-fg-color: #ffffff;                      // @success_fg_color Light
  --success-bg-hover-color: var(--adw-green-5);     // Custom darker shade
  --success-bg-active-color: #1f8a5f;               // Custom even darker shade

  // Warning State
  --warning-color: #9c6e03;                         // @warning_color Light
  --warning-bg-color: #e5a50a;                      // @warning_bg_color Light
  --warning-fg-color: rgba(0, 0, 0, 0.8);           // @warning_fg_color Light
  --warning-bg-hover-color: #d99809;                // Custom darker shade
  --warning-bg-active-color: #c08008;               // Custom even darker shade

  // Error State
  --error-color: #c01c28;                           // @error_color Light
  --error-bg-color: #e01b24;                        // @error_bg_color Light
  --error-fg-color: #ffffff;                        // @error_fg_color Light
  --error-bg-hover-color: #d0121b;                  // Custom darker shade (same as destructive hover)
  --error-bg-active-color: #b00912;                 // Custom even darker shade (same as destructive active)

  // Info colors (using blue accent as per common practice, maps to current accent)
  --info-color: var(--accent-color);
  --info-bg-color: var(--accent-bg-color);
  --info-fg-color: var(--accent-fg-color);
  --info-bg-hover-color: var(--accent-bg-hover-color);
  --info-bg-active-color: var(--accent-bg-active-color);

  // Base UI Colors from Libadwaita 1.5
  --window-bg-color: #fafafa;                       // @window_bg_color Light
  --window-fg-color: rgba(0, 0, 0, 0.8);           // @window_fg_color Light
  --view-bg-color: #ffffff;                         // @view_bg_color Light
  --view-fg-color: rgba(0, 0, 0, 0.8);             // @view_fg_color Light
  --body-fg-color-rgb: 0, 0, 0;                    // For use in rgba(var(--body-fg-color-rgb), alpha)

  --headerbar-bg-color: #ffffff;                    // @headerbar_bg_color Light
  --headerbar-fg-color: rgba(0, 0, 0, 0.8);         // @headerbar_fg_color Light
  --headerbar-border-color: rgba(0, 0, 0, 0.8);     // @headerbar_border_color Light (same as fg, but doesn't change with it)
  --headerbar-backdrop-color: #fafafa;              // @headerbar_backdrop_color Light (alias of window_bg_color)
  --headerbar-shade-color: rgba(0, 0, 0, 0.12);     // @headerbar_shade_color Light
  --headerbar-darker-shade-color: rgba(0, 0, 0, 0.12); // @headerbar_darker_shade_color Light (doc says 0.20 but also says same as shade for light?)

  --sidebar-bg-color: #ebebeb;                      // @sidebar_bg_color Light
  --sidebar-fg-color: rgba(0, 0, 0, 0.8);           // @sidebar_fg_color Light
  --sidebar-backdrop-color: #f2f2f2;                // @sidebar_backdrop_color Light
  --sidebar-border-color: rgba(0, 0, 0, 0.07);      // @sidebar_border_color Light
  --sidebar-shade-color: rgba(0, 0, 0, 0.07);       // @sidebar_shade_color Light

  --secondary-sidebar-bg-color: #f3f3f3;            // @secondary_sidebar_bg_color Light
  --secondary-sidebar-fg-color: rgba(0, 0, 0, 0.8);   // @secondary_sidebar_fg_color Light
  --secondary-sidebar-backdrop-color: #f6f6f6;      // @secondary_sidebar_backdrop_color Light
  --secondary-sidebar-border-color: rgba(0, 0, 0, 0.07); // @secondary_sidebar_border_color Light
  --secondary-sidebar-shade-color: rgba(0, 0, 0, 0.07);  // @secondary_sidebar_shade_color Light

  --card-bg-color: #ffffff;                         // @card_bg_color Light
  --card-fg-color: rgba(0, 0, 0, 0.8);             // @card_fg_color Light
  --card-shade-color: rgba(0, 0, 0, 0.07);          // @card_shade_color Light

  --popover-bg-color: #ffffff;                      // @popover_bg_color Light
  --popover-fg-color: rgba(0, 0, 0, 0.8);          // @popover_fg_color Light
  --popover-shade-color: rgba(0, 0, 0, 0.07);       // @popover_shade_color Light

  --dialog-bg-color: #fafafa;                       // @dialog_bg_color Light
  --dialog-fg-color: rgba(0, 0, 0, 0.8);           // @dialog_fg_color Light

  --thumbnail-bg-color: #ffffff;                    // @thumbnail_bg_color Light
  --thumbnail-fg-color: rgba(0, 0, 0, 0.8);        // @thumbnail_fg_color Light

  --borders-color: rgba(0, 0, 0, 0.15);             // @borders (regular contrast)
  --shade-color: rgba(0, 0, 0, 0.07);               // @shade_color Light
  --scrollbar-outline-color: #ffffff;               // @scrollbar_outline_color Light

  // Component-specific (Ensure these align with Adwaita principles, using named colors where possible)
  --button-bg-color: var(--adw-light-2);            // Example: use a light grey from palette
  --button-fg-color: rgba(0, 0, 0, 0.8);
  --button-border-color: var(--borders-color);      // Use general border color
  --button-hover-bg-color: var(--adw-light-3);      // Slightly darker grey
  --button-active-bg-color: var(--adw-light-4);     // Even darker grey

  --button-flat-bg-color: transparent;
  --button-flat-hover-bg-color: rgba(0, 0, 0, 0.05); // Subtle hover for flat buttons
  --button-flat-active-bg-color: rgba(0, 0, 0, 0.1);  // Subtle active for flat buttons

  --link-color: var(--accent-color);                // Links use standalone accent color
  --link-visited-color: var(--adw-purple-4);        // Example: a muted color for visited links

  --progress-bar-track-color: var(--shade-color);   // Use general shade for track
  --progress-bar-fill-color: var(--accent-bg-color); // Use accent bg for fill

  --toast-bg-color: #303030;                        // Toasts are dark by default in Adwaita
  --toast-fg-color: #ffffff;
  --toast-box-shadow: var(--popover-box-shadow-light); // Use popover shadow
  --secondary-text-color: rgba(0,0,0,0.7);          // For less prominent text
  --dialog-box-shadow: var(--dialog-box-shadow-light);
  --dialog-backdrop-color: rgba(0, 0, 0, 0.25);

  --list-row-hover-bg-color: rgba(0,0,0,0.06);      // Subtle hover for list rows
  --list-row-active-bg-color: rgba(0,0,0,0.08);     // Slightly more prominent active
  --list-row-selected-bg-color: var(--accent-bg-color); // Selected uses accent bg
  --list-row-selected-fg-color: var(--accent-fg-color); // Selected uses accent fg
  --expander-content-bg-color: rgba(0,0,0,0.03);    // Background for expanded content
  --list-separator-color: var(--borders-color);     // Use general border for separators

  --entry-border-color: var(--borders-color);
  --entry-disabled-bg-color: rgba(0,0,0,0.04);
  --entry-disabled-border-color: rgba(0,0,0,0.1);
  --entry-inset-shadow-light: rgba(0,0,0,0.03);

  --disabled-fg-color: rgba(0,0,0,0.35);            // General disabled foreground

  --switch-knob-bg-color: #ffffff;
  --switch-slider-off-bg-color: rgba(0,0,0,0.08);   // alpha(currentColor, 0.08)
  --switch-knob-disabled-bg-color: var(--adw-light-2);
  --switch-slider-disabled-off-bg-color: rgba(0,0,0,0.06);

  // Banner specific
  --banner-bg-color: var(--adw-light-3); // Default/Info
  --banner-fg-color: rgba(0,0,0,0.8);
  --banner-border-color: var(--adw-light-4); // A slightly darker border for info banners

  --banner-error-bg-color: var(--adw-red-1); // Lighter red for bg in light theme
  --banner-error-fg-color: var(--adw-light-1); // White text on red
  --banner-error-border-color: var(--adw-red-2);

  // Banner button specific (light theme)
  --banner-button-fg-color: var(--banner-fg-color); // Inherit text color from banner
  --banner-button-bg-color: rgba(0,0,0,0.05); // Subtle darker overlay
  --banner-button-hover-bg-color: rgba(0,0,0,0.08);
  --banner-button-active-bg-color: rgba(0,0,0,0.12);

  --banner-error-button-fg-color: var(--banner-error-fg-color); // Inherit text color
  --banner-error-button-bg-color: rgba(0,0,0,0.08); // Subtle darker overlay on error bg
  --banner-error-button-hover-bg-color: rgba(0,0,0,0.12);
  --banner-error-button-active-bg-color: rgba(0,0,0,0.16);
}

@mixin dark-theme {
  // Accent Colors (Dynamically set via --chosen-accent-dark-*)
  --accent-color: var(--chosen-accent-dark-color);
  --accent-bg-color: var(--chosen-accent-dark-bg-color);
  --accent-fg-color: var(--chosen-accent-dark-fg-color);
  --accent-bg-hover-color: var(--chosen-accent-dark-hover-bg-color);
  --accent-bg-active-color: var(--chosen-accent-dark-active-bg-color);

  // Destructive State (Fixed, not affected by accent choice)
  --destructive-color: #ff7b63;                     // @destructive_color Dark
  --destructive-bg-color: #c01c28;                  // @destructive_bg_color Dark
  --destructive-fg-color: #ffffff;                  // @destructive_fg_color Dark
  --destructive-bg-hover-color: #d02832;            // Custom lighter shade
  --destructive-bg-active-color: #e03f49;           // Custom even lighter shade

  // Success State
  --success-color: #8ff0a4;                         // @success_color Dark
  --success-bg-color: #26a269;                      // @success_bg_color Dark
  --success-fg-color: #ffffff;                      // @success_fg_color Dark
  --success-bg-hover-color: var(--adw-green-4);     // Custom lighter shade
  --success-bg-active-color: var(--adw-green-3);    // Custom even lighter shade

  // Warning State
  --warning-color: #f8e45c;                         // @warning_color Dark
  --warning-bg-color: #cd9309;                      // @warning_bg_color Dark
  --warning-fg-color: rgba(0, 0, 0, 0.8);           // @warning_fg_color Dark
  --warning-bg-hover-color: #dab009;                // Custom lighter shade
  --warning-bg-active-color: #e5c00a;               // Custom even lighter shade

  // Error State
  --error-color: #ff7b63;                           // @error_color Dark
  --error-bg-color: #c01c28;                        // @error_bg_color Dark
  --error-fg-color: #ffffff;                        // @error_fg_color Dark
  --error-bg-hover-color: #d02832;                  // Custom lighter shade (same as destructive hover)
  --error-bg-active-color: #e03f49;                 // Custom even lighter shade (same as destructive active)

  // Info colors (using blue accent as per common practice, maps to current accent)
  --info-color: var(--accent-color);
  --info-bg-color: var(--accent-bg-color);
  --info-fg-color: var(--accent-fg-color);
  --info-bg-hover-color: var(--accent-bg-hover-color);
  --info-bg-active-color: var(--accent-bg-active-color);

  // Base UI Colors from Libadwaita 1.5
  --window-bg-color: #242424;                       // @window_bg_color Dark
  --window-fg-color: #ffffff;                       // @window_fg_color Dark
  --view-bg-color: #1e1e1e;                         // @view_bg_color Dark
  --view-fg-color: #ffffff;                         // @view_fg_color Dark
  --body-fg-color-rgb: 255, 255, 255;              // For use in rgba(var(--body-fg-color-rgb), alpha)

  --headerbar-bg-color: #303030;                    // @headerbar_bg_color Dark
  --headerbar-fg-color: #ffffff;                    // @headerbar_fg_color Dark
  --headerbar-border-color: #ffffff;                // @headerbar_border_color Dark (same as fg)
  --headerbar-backdrop-color: #242424;              // @headerbar_backdrop_color Dark (alias of window_bg_color)
  --headerbar-shade-color: rgba(0, 0, 0, 0.36);     // @headerbar_shade_color Dark
  --headerbar-darker-shade-color: rgba(0, 0, 0, 0.9); // @headerbar_darker_shade_color Dark

  --sidebar-bg-color: #303030;                      // @sidebar_bg_color Dark
  --sidebar-fg-color: #ffffff;                      // @sidebar_fg_color Dark
  --sidebar-backdrop-color: #2a2a2a;                // @sidebar_backdrop_color Dark
  --sidebar-border-color: rgba(0, 0, 0, 0.36);      // @sidebar_border_color Dark
  --sidebar-shade-color: rgba(0, 0, 0, 0.25);       // @sidebar_shade_color Dark

  --secondary-sidebar-bg-color: #2a2a2a;            // @secondary_sidebar_bg_color Dark
  --secondary-sidebar-fg-color: #ffffff;            // @secondary_sidebar_fg_color Dark
  --secondary-sidebar-backdrop-color: #272727;      // @secondary_sidebar_backdrop_color Dark
  --secondary-sidebar-border-color: rgba(0, 0, 0, 0.36); // @secondary_sidebar_border_color Dark
  --secondary-sidebar-shade-color: rgba(0, 0, 0, 0.25);  // @secondary_sidebar_shade_color Dark

  --card-bg-color: rgba(255, 255, 255, 0.08);       // @card_bg_color Dark
  --card-fg-color: #ffffff;                         // @card_fg_color Dark
  --card-shade-color: rgba(0, 0, 0, 0.36);          // @card_shade_color Dark

  --popover-bg-color: #383838;                      // @popover_bg_color Dark
  --popover-fg-color: #ffffff;                      // @popover_fg_color Dark
  --popover-shade-color: rgba(0, 0, 0, 0.25);       // @popover_shade_color Dark

  --dialog-bg-color: #383838;                       // @dialog_bg_color Dark
  --dialog-fg-color: #ffffff;                       // @dialog_fg_color Dark

  --thumbnail-bg-color: #383838;                    // @thumbnail_bg_color Dark
  --thumbnail-fg-color: #ffffff;                    // @thumbnail_fg_color Dark

  --borders-color: rgba(255, 255, 255, 0.15);       // @borders (regular contrast)
  --shade-color: rgba(0, 0, 0, 0.25);               // @shade_color Dark
  --scrollbar-outline-color: rgba(0, 0, 0, 0.5);    // @scrollbar_outline_color Dark

  // Component-specific
  --button-bg-color: var(--adw-dark-2);             // Example: use a dark grey from palette
  --button-fg-color: #ffffff;
  --button-border-color: var(--borders-color);
  --button-hover-bg-color: var(--adw-dark-1);       // Slightly lighter grey
  --button-active-bg-color: #676767;                // Custom mid-grey, or var(--adw-dark-1) + bit lighter

  --button-flat-bg-color: transparent;
  --button-flat-hover-bg-color: rgba(255, 255, 255, 0.08);
  --button-flat-active-bg-color: rgba(255, 255, 255, 0.12);

  --link-color: var(--accent-color);
  --link-visited-color: var(--adw-purple-1);        // Example: a lighter muted color for visited links

  --progress-bar-track-color: var(--shade-color);
  --progress-bar-fill-color: var(--accent-bg-color);

  --toast-bg-color: #303030;                        // Adwaita toasts are dark
  --toast-fg-color: #ffffff;
  --toast-box-shadow: var(--popover-box-shadow-dark);
  --secondary-text-color: rgba(255,255,255,0.7);
  --dialog-box-shadow: var(--dialog-box-shadow-dark);
  --dialog-backdrop-color: rgba(0, 0, 0, 0.4);

  --list-row-hover-bg-color: rgba(255,255,255,0.08);
  --list-row-active-bg-color: rgba(255,255,255,0.1);
  --list-row-selected-bg-color: var(--accent-bg-color);
  --list-row-selected-fg-color: var(--accent-fg-color);
  --expander-content-bg-color: rgba(255,255,255,0.03);
  --list-separator-color: var(--borders-color);

  --entry-border-color: var(--borders-color);
  --entry-disabled-bg-color: rgba(255,255,255,0.04);
  --entry-disabled-border-color: rgba(255,255,255,0.1);
  --entry-inset-shadow-dark: rgba(0,0,0,0.15);

  --disabled-fg-color: rgba(255,255,255,0.35);

  --switch-knob-bg-color: #ffffff;
  --switch-slider-off-bg-color: rgba(255,255,255,0.12); // alpha(currentColor, 0.12)
  --switch-knob-disabled-bg-color: var(--adw-dark-1);
  --switch-slider-disabled-off-bg-color: rgba(255,255,255,0.08);

  // Banner specific
  --banner-bg-color: var(--adw-dark-3); // Default/Info
  --banner-fg-color: #ffffff;
  --banner-border-color: var(--adw-dark-4);

  --banner-error-bg-color: var(--adw-red-4); // Darker red for bg in dark theme
  --banner-error-fg-color: var(--adw-light-1); // White text
  --banner-error-border-color: var(--adw-red-5);

  // Banner button specific (dark theme)
  --banner-button-fg-color: var(--banner-fg-color); // Inherit text color from banner
  --banner-button-bg-color: rgba(255,255,255,0.07); // Subtle lighter overlay
  --banner-button-hover-bg-color: rgba(255,255,255,0.10);
  --banner-button-active-bg-color: rgba(255,255,255,0.13);

  --banner-error-button-fg-color: var(--banner-error-fg-color); // Inherit text color
  --banner-error-button-bg-color: rgba(255,255,255,0.08); // Subtle lighter overlay on error bg
  --banner-error-button-hover-bg-color: rgba(255,255,255,0.12);
  --banner-error-button-active-bg-color: rgba(255,255,255,0.16);
}

// General Helper Variables (not theme-specific)
:root {
  // Font Variables
  --document-font-family: 'Cantarell', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  --monospace-font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
  --font-size-base: 10pt;
  --font-size-small: 8pt;
  --font-size-large: 12pt;
  --font-size-h1: 18pt;
  --font-size-h2: 16pt;
  --font-size-h3: 14pt;
  --font-size-h4: 12pt;

  // Border Radius
  --border-radius-small: 3px;
  --border-radius-medium: 4px; // Common for buttons
  --border-radius-default: 6px; // Common for cards, inputs
  --border-radius-large: 12px; // Common for windows, dialogs
  --window-radius: var(--border-radius-large);
  --border-width: 1px;

  // Spacing
  --spacing-xxs: 3px;
  --spacing-xs: 6px;
  --spacing-s: 9px;
  --spacing-m: 12px;
  --spacing-l: 18px;
  --spacing-xl: 24px;
  --spacing-xxl: 36px;

  // Row Paddings
  --row-padding-vertical-default: var(--spacing-m);
  --row-padding-horizontal-default: var(--spacing-m);

  // Opacity
  --opacity-disabled: 0.5;
  --icon-opacity: 0.7; // Adjusted for better visibility based on Adwaita icon style
  --opacity-hover: 0.8; // General hover opacity, can be overridden
  --opacity-active: 0.6; // General active opacity, can be overridden

  // Box Shadows (from Adwaita spec)
  --popover-box-shadow-light: 0 1px 2px 0 rgba(0,0,0,0.1), 0 2px 8px 0 rgba(0,0,0,0.1);
  --popover-box-shadow-dark: 0 1px 2px 0 rgba(0,0,0,0.25), 0 2px 8px 0 rgba(0,0,0,0.25);
  --dialog-box-shadow-light: 0 4px 8px rgba(0,0,0,0.15), 0 1px 4px rgba(0,0,0,0.1);
  --dialog-box-shadow-dark: 0 3px 9px rgba(0,0,0,0.5);

  // Alert Dialog
  --alert-dialog-text-max-width: 40ch;

  // Preferences Dialog
  --preferences-dialog-min-width: 600px;
  --preferences-dialog-min-height: 450px;
  --preferences-dialog-max-width: 800px;
  --preferences-page-description-max-width: 60ch;
  --preferences-group-description-max-width: 70ch;

  // General border color fallbacks (should ideally use specific ones like --borders-color)
  --border-color-light: rgba(0, 0, 0, 0.12);
  --border-color-dark: rgba(255, 255, 255, 0.07);

  // Z-index Scale (CSS Custom Properties)
  // These are intended for global stacking context management.
  --z-index-banner: 1000;
  --z-index-flap: 100; // Flaps are usually part of the page flow or within specific containers
  --z-index-popover: 1200; // Popovers like menus, tooltips should be high
  --z-index-toast-overlay: 1500; // Toasts should be very high
  --z-index-bottom-sheet-backdrop: 1080;
  --z-index-bottom-sheet: 1081;
  --z-index-dialog-backdrop: 1100; // Dialog backdrops
  --z-index-dialog: 1101; // Dialogs themselves
  --z-index-tooltip: 2000; // Tooltips generally highest
}


// Theme Application
// JS will add .light-theme or .dark-theme class on the HTML element.
// No default theme is applied here at the root; relies on the class.

html.light-theme {
  @include light-theme;
}

html.dark-theme {
  @include dark-theme;
}

// Fallback if JS fails or is disabled, apply dark theme by default to :root
// This is a safety net. The inline script in <head> should prevent this from being needed for JS users.
// However, for non-JS users, this ensures styles are applied.
// We need to ensure this doesn't conflict with the html.dark-theme or html.light-theme rules.
// One way is to make the html.dark-theme and html.light-theme selectors more specific,
// or accept that non-JS users will get the default dark theme.
// For now, let's assume the JS will set the class on <html>.
// If no class is set on <html> by JS (e.g. script error before classing), what happens?
// Let's provide a very basic default on :root for core variables if no class is set on html.
// This is tricky because @include dark-theme sets a LOT of variables.
// A better approach for non-JS might be a <noscript> tag setting a class.
// Or, we simply ensure one of the classes is always set by the inline script.

// The inline script in base.html now *always* adds either .light-theme or .dark-theme
// to the <html> element. So, one of these two blocks below will always be active.
// No further :root default is strictly necessary if that script works reliably.


// GTK @define-color mapping (for reference or potential future use if parsing SCSS for such)
// These are not directly used by browsers but map to the Adwaita GTK color names.
// The actual CSS variables above are what styles will use.
@mixin define-gtk-colors() {
  @define-color accent_color var(--accent-color);
  @define-color accent_bg_color var(--accent-bg-color);
  @define-color accent_fg_color var(--accent-fg-color);

  @define-color destructive_color var(--destructive-color);
  @define-color destructive_bg_color var(--destructive-bg-color);
  @define-color destructive_fg_color var(--destructive-fg-color);

  @define-color success_color var(--success-color);
  @define-color success_bg_color var(--success-bg-color);
  @define-color success_fg_color var(--success-fg-color);

  @define-color warning_color var(--warning-color);
  @define-color warning_bg_color var(--warning-bg-color);
  @define-color warning_fg_color var(--warning-fg-color);

  @define-color error_color var(--error-color);
  @define-color error_bg_color var(--error-bg-color);
  @define-color error_fg_color var(--error-fg-color);

  @define-color window_bg_color var(--window-bg-color);
  @define-color window_fg_color var(--window-fg-color);
  @define-color view_bg_color var(--view-bg-color);
  @define-color view_fg_color var(--view-fg-color);

  @define-color headerbar_bg_color var(--headerbar-bg-color);
  @define-color headerbar_fg_color var(--headerbar-fg-color);
  @define-color headerbar_border_color var(--headerbar-border-color); // Note: Adwaita doc specifies this has same default as fg but doesn't change with it.
  @define-color headerbar_backdrop_color var(--headerbar-backdrop-color);
  @define-color headerbar_shade_color var(--headerbar-shade-color);
  @define-color headerbar_darker_shade_color var(--headerbar-darker-shade-color);

  @define-color sidebar_bg_color var(--sidebar-bg-color);
  @define-color sidebar_fg_color var(--sidebar-fg-color);
  @define-color sidebar_backdrop_color var(--sidebar-backdrop-color);
  @define-color sidebar_border_color var(--sidebar-border-color);
  @define-color sidebar_shade_color var(--sidebar-shade-color);

  @define-color secondary_sidebar_bg_color var(--secondary-sidebar-bg-color);
  @define-color secondary_sidebar_fg_color var(--secondary-sidebar-fg-color);
  @define-color secondary_sidebar_backdrop_color var(--secondary-sidebar-backdrop-color);
  @define-color secondary_sidebar_border_color var(--secondary-sidebar-border-color);
  @define-color secondary_sidebar_shade_color var(--secondary-sidebar-shade-color);

  @define-color card_bg_color var(--card-bg-color);
  @define-color card_fg_color var(--card-fg-color);
  @define-color card_shade_color var(--card-shade-color);

  @define-color popover_bg_color var(--popover-bg-color);
  @define-color popover_fg_color var(--popover-fg-color);
  @define-color popover_shade_color var(--popover-shade-color);

  @define-color dialog_bg_color var(--dialog-bg-color);
  @define-color dialog_fg_color var(--dialog-fg-color);

  @define-color thumbnail_bg_color var(--thumbnail-bg-color);
  @define-color thumbnail_fg_color var(--thumbnail-fg-color);

  @define-color borders_color var(--borders-color); // Helper color: alpha(currentColor, 0.15) or alpha(currentColor, 0.5) for high contrast
  @define-color shade_color var(--shade-color);
  @define-color scrollbar_outline_color var(--scrollbar-outline-color);
  // Note: progress_bar_track_color and progress_bar_fill_color are not standard Adwaita named colors,
  // but are used in this project. They are mapped to --shade-color and --accent-bg-color respectively.
  @define-color progress_bar_track_color var(--progress-bar-track-color);
  @define-color progress_bar_fill_color var(--progress-bar-fill-color);
}

// Apply the @define-color mappings within each theme context if they need to change dynamically with the theme.
// However, since their values are derived from CSS variables that already change with the theme,
// defining them once in :root is sufficient for reference.
:root {
  // This block is more for documentation or for tools that might parse these @define-color rules.
  // The actual styling relies on the CSS custom properties defined in the theme mixins.
  @include define-gtk-colors();
}


// Z-indexes
$zindex-flap: 100;
$zindex-popover: 500;
$zindex-dialog: 1000;
$zindex-dialog-backdrop: 999;
$zindex-toast: 1500;
$zindex-tooltip: 2000;