@use 'variables';
@use 'mixins';

// scss/_toggle_group.scss

// .adw-toggle-group is a container for a set of toggle buttons.
// It often looks like a single, segmented button.
.adw-toggle-group {
  display: inline-flex;
  border-radius: var(--border-radius-default);
  // The group itself can have a border that encloses all buttons
  border: var(--border-width) solid var(--border-color);
  overflow: hidden; // Ensures the child buttons' corners don't stick out

  // Styling for buttons directly inside the toggle group
  > .adw-button, > .adw-toggle-button {
    border-radius: 0; // No border-radius for individual buttons
    border: none; // No individual borders
    // Add a separator between buttons
    &:not(:last-child) {
      border-right: var(--border-width) solid var(--border-color);
    }

    // First and last buttons get the parent's border-radius
    &:first-child {
      border-top-left-radius: var(--border-radius-default);
      border-bottom-left-radius: var(--border-radius-default);
    }
    &:last-child {
      border-top-right-radius: var(--border-radius-default);
      border-bottom-right-radius: var(--border-radius-default);
    }

    // Active/selected state for toggle buttons
    &.active, &[aria-pressed="true"] {
      background-color: var(--accent-bg-color);
      color: var(--accent-fg-color);
      // Remove separator on the side of an active button to merge it visually
      & + .adw-button, & + .adw-toggle-button {
        border-left-color: transparent;
      }
      border-right-color: transparent;
    }

    // Focus state needs to be handled carefully in a group
    &:focus-visible {
      z-index: 1; // Bring the focused button to the front
      // Apply focus ring, but it might look better on the parent .adw-toggle-group
    }
  }

  // When the whole group has focus
  &:focus-within {
     box-shadow: 0 0 0 var(--focus-ring-width) rgba(var(--accent-color-rgb), 0.3);
  }
}

// .adw-toggle-button is a standalone toggle button
.adw-toggle-button {
  // It can be styled just like a regular .adw-button
  @include mixins.apply-flat-button-style;
  // ... other .adw-button styles ...

  // Active state
  &.active, &[aria-pressed="true"] {
    background-color: var(--accent-bg-color);
    color: var(--accent-fg-color);
  }
}

// A specific style for toggle groups that look like a view switcher
// This is common in Libadwaita for things like day/week/month views.
.adw-view-switcher.adw-toggle-group {
    border: var(--border-width) solid var(--shade-color);
    border-radius: var(--border-radius-default);
    padding: var(--spacing-xxs);
    background-color: var(--button-bg-color);
    gap: var(--spacing-xxs);

    > .adw-button, > .adw-toggle-button {
        border: none;
        border-radius: var(--border-radius-small);
        @include mixins.apply-flat-button-style; // Assumes base button styles are present or handled by the element itself

        &.active, &[aria-pressed="true"] {
            background-color: var(--accent-bg-color);
            color: var(--accent-fg-color);
            box-shadow: var(--subtle-box-shadow);
        }
    }
}
