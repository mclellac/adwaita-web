@use 'variables';
@use 'mixins';

// scss/_split_button.scss

// AdwSplitButton Styling
.adw-split-button {
  display: inline-flex;
  border-radius: var(--border-radius-default);
  overflow: hidden; // Keep the two parts contained within the rounded border
  border: var(--border-width) solid var(--border-color);
  background-color: var(--button-bg-color);

  &:not(.suggested-action):not(.destructive-action) {
    &:hover {
      border-color: var(--accent-color);
    }
    &:focus-within {
      border-color: var(--accent-color);
      box-shadow: 0 0 0 var(--focus-ring-width) rgba(var(--accent-color-rgb), 0.3);
    }
  }

  // The main action part of the button
  .adw-split-button-action {
    padding: var(--spacing-s) var(--spacing-m);
    border: none;
    background-color: transparent;
    color: var(--button-fg-color);
    font-weight: var(--font-weight-bold);
    transition: background-color var(--animation-duration-short) var(--animation-ease-out-cubic);

    &:hover {
      background-color: var(--button-hover-bg-color);
    }
    &:active {
      background-color: var(--button-active-bg-color);
    }
    &:focus-visible {
      outline: none; // Focus is handled by the parent wrapper
    }
  }

  // The dropdown arrow part of the button
  .adw-split-button-dropdown {
    padding: var(--spacing-s);
    border: none;
    background-color: transparent;
    color: var(--button-fg-color);
    border-left: var(--border-width) solid var(--border-color);
    transition: background-color var(--animation-duration-short) var(--animation-ease-out-cubic);

    &:hover {
      background-color: var(--button-hover-bg-color);
    }
    &:active {
      background-color: var(--button-active-bg-color);
    }
    &:focus-visible {
      outline: none; // Focus is handled by the parent wrapper
    }

    .adw-icon {
      display: block;
    }
  }

  // Suggested action style
  &.suggested-action {
    background-color: var(--accent-bg-color);
    color: var(--accent-fg-color);
    border-color: transparent;

    &:hover {
      background-color: var(--accent-bg-hover-color);
    }
    &:focus-within {
      box-shadow: 0 0 0 var(--focus-ring-width) rgba(var(--accent-fg-color-rgb), 0.3);
    }

    .adw-split-button-action,
    .adw-split-button-dropdown {
      color: inherit;
      &:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }
      &:active {
        background-color: rgba(255, 255, 255, 0.2);
      }
    }
    .adw-split-button-dropdown {
      border-left-color: #{rgba(variables.$accent-default-fg, 0.3)}; // Use SASS rgba for a subtle border with accent's FG
    }
  }

  // Destructive action style
  &.destructive-action {
    // Similar to suggested-action but with destructive colors
  }

  // Disabled state
  &.disabled, &[disabled] {
    opacity: var(--disabled-opacity);
    pointer-events: none;
    background-color: var(--input-readonly-bg-color);
    border-color: var(--shade-color);
  }
}
