@use 'variables';

.adw-header-bar {
  background-color: var(--headerbar-bg-color);
  color: var(--headerbar-fg-color);
  border-bottom: var(--border-width, 1px) solid var(--headerbar-shade-color); // Default bottom border
  padding: var(--spacing-xs) var(--spacing-m); // 6px 12px
  display: flex;
  align-items: center;
  min-height: 56px; // Adjusted min-height for typical Adwaita headerbar
  position: relative; // For pseudo-elements or absolute positioning if needed

  .adw-header-bar-start,
  .adw-header-bar-end {
    display: flex;
    align-items: center;
    flex-shrink: 0;
    gap: var(--spacing-xs); // 6px gap

    > * {
      color: var(--headerbar-fg-color); // Ensure children inherit text color
    }

    // Default styling for buttons within headerbar start/end areas to be flat
    // Exclude suggested/destructive actions which have their own look.
    .adw-button:not(.suggested-action):not(.destructive-action) {
      background-color: transparent;
      border-color: transparent;
      box-shadow: none;
      color: var(--headerbar-fg-color); // Ensure correct fg color

      &:hover {
        background-color: var(--button-flat-hover-bg-color); // Use flat button hover
      }
      &:active, &.active {
        background-color: var(--button-flat-active-bg-color); // Use flat button active
      }
    }
  }

  .adw-header-bar-start {
    // No specific margin needed if using gap
  }

  .adw-header-bar-end {
    margin-left: auto; // Pushes to the right
    // No specific margin needed if using gap
  }

  .adw-header-bar-center-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
    flex-shrink: 1;
    min-width: 0;
    text-align: center;
    margin: 0 var(--spacing-m); // Horizontal margin to separate from start/end items
  }

  .adw-header-bar-title {
    font-size: var(--font-size-large); // Typically 12pt or equivalent
    font-weight: bold; // Adwaita titles are often bold
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.2; // Ensure single line doesn't take too much vertical space
  }

  .adw-header-bar-subtitle {
    font-size: var(--font-size-small); // Typically 8pt or equivalent
    color: var(--headerbar-fg-color);
    opacity: 0.7; // Subtitles are de-emphasized
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.2;
    margin-top: var(--spacing-xxs); // Small space between title and subtitle
  }

  // When content is scrolled underneath
  &.scrolled {
    // Optionally make border darker or add shadow
    border-bottom-color: var(--headerbar-darker-shade-color); // Example: use darker shade color
    // box-shadow: 0 1px 2px -1px var(--headerbar-shade-color); // Alternative shadow
  }


  // Ensure links and adw-buttons within the headerbar inherit the correct color
  // and have appropriate default styling if not overridden by button's own classes.

  // General links and default buttons in headerbar
  a:not(.adw-button), // For plain <a> tags that aren't styled as buttons
  .adw-button:not(.suggested-action):not(.destructive-action) { // For adw-buttons that are not special types
    color: var(--headerbar-fg-color);
    text-decoration: none;

    &.adw-button { // If it's an .adw-button caught by this rule, make it look flat
        background-color: transparent;
        border-color: transparent;
        box-shadow: none;
        &:hover {
            background-color: var(--button-flat-hover-bg-color);
            // color: var(--headerbar-fg-color); // Text color should remain --headerbar-fg-color on hover for these flat buttons
        }
        &:active, &.active { // &.active is for toggle buttons, not general active state from click
            background-color: var(--button-flat-active-bg-color);
            // color: var(--headerbar-fg-color);
        }
    }
     &:hover:not(.adw-button) { // For plain <a> tags hover (that are not .adw-button)
        // color: var(--headerbar-fg-color); // Or a slightly different hover if desired
        // text-decoration: underline; // Optional for plain links
    }
  }
}