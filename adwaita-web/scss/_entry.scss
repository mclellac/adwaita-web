@use "variables";

.adw-entry {
  // Local variables for potential per-instance override, defaulting to global Adwaita standards
  --_entry-padding-vertical: var(--entry-padding-vertical, var(--spacing-xs)); // e.g. 6px
  --_entry-padding-horizontal: var(--entry-padding-horizontal, var(--spacing-s)); // e.g. 9px
  --_entry-border-width: var(--entry-border-width, var(--border-width));
  --_entry-border-color: var(--entry-border-color, var(--borders-color));
  --_entry-background-color: var(--entry-background-color, var(--view-bg-color)); // Adwaita entries often use view_bg_color

  // Adwaita entries have a subtle inset shadow
  --_entry-inset-shadow: var(--entry-inset-shadow, inset 0 1px 1px var(--entry-inset-shadow-light));
  body.dark-theme & {
    --_entry-inset-shadow: var(--entry-inset-shadow, inset 0 1px 1px var(--entry-inset-shadow-dark));
  }

  --_entry-focus-border-color: var(--entry-focus-border-color, var(--accent-color));
  // Adwaita focus ring for entries:
  --_entry-focus-ring-shadow: var(--entry-focus-ring-shadow, 0 0 0 2px var(--accent-color));


  padding: var(--_entry-padding-vertical) var(--_entry-padding-horizontal);
  border-width: var(--_entry-border-width);
  border-style: solid;
  border-color: var(--_entry-border-color);
  border-radius: var(--border-radius-medium); // 4px is common for Adwaita entries
  background-color: var(--_entry-background-color);
  color: var(--view-fg-color); // Text color
  font-size: var(--font-size-base);
  transition: border-color 0.1s ease-out, box-shadow 0.1s ease-out;
  box-shadow: var(--_entry-inset-shadow);

  &:focus,
  &:focus-within { // Use focus-within if the entry might contain other focusable elements (like an icon button)
    outline: none;
    border-color: var(--_entry-focus-border-color);
    // Combine inset shadow with the outer focus ring
    box-shadow: var(--_entry-inset-shadow), var(--_entry-focus-ring-shadow);
  }

  &::placeholder {
    color: var(--view-fg-color); // Standard text color for placeholder
    opacity: 0.5; // Adwaita placeholders are less prominent
  }

  &[disabled],
  &:disabled {
    background-color: var(--entry-disabled-bg-color); // Ensure this is defined in _variables
    border-color: var(--entry-disabled-border-color); // Ensure this is defined
    color: var(--disabled-fg-color);
    box-shadow: none; // No shadow for disabled state
    // opacity: 1; // No need for opacity if bg/fg are distinct
    cursor: not-allowed;
    pointer-events: none;
  }

  // If entry is part of a group or has attached buttons, border radius might be adjusted
  // e.g., in a search bar with an attached button. This would be handled by a wrapper or specific context.
}

// Variant for entries used within rows (e.g., AdwEntryRow)
.adw-entry.row-input {
  border-width: 0 0 1px 0; // Only bottom border
  border-radius: 0; // No border radius for a clean line
  background-color: transparent;
  box-shadow: none; // Remove inset shadow
  padding-left: 0; // Row itself will provide horizontal padding
  padding-right: 0;
  // padding-top and padding-bottom might need slight adjustment if default from .adw-entry is too much/little for row context

  &:focus,
  &:focus-within {
    border-color: var(--_entry-focus-border-color); // Keep accent focus border
    box-shadow: none; // No outer focus ring for row-input, just the accent border
  }

  // If the row itself has a background, this transparent entry will blend.
  // If the row is on a card, the card provides the background.
}


// Variables needed in _variables.scss (ensure they exist, from original file analysis they mostly do):
// var(--entry-inset-shadow-light) -> e.g., rgba(0,0,0,0.03)
// var(--entry-inset-shadow-dark) -> e.g., rgba(0,0,0,0.1) or similar for dark
// var(--entry-disabled-bg-color)
// var(--entry-disabled-border-color)
// var(--disabled-fg-color)

// Standalone Textarea (multiline entry)
// Mirrors .adw-entry but for <textarea> elements.
.adw-textarea-standalone {
  // Uses global Adwaita variables directly, as it's a standalone element class
  background-color: var(--view-bg-color);
  color: var(--view-fg-color);
  border: 1px solid var(--entry-border-color, var(--borders-color)); // Fallback for entry-border-color
  border-radius: var(--border-radius-default); // Use a slightly larger radius for textareas generally
  padding: var(--spacing-s) var(--spacing-m);
  font-family: var(--document-font-family);
  font-size: var(--font-size-base);
  line-height: 1.5;
  resize: vertical; // Allow vertical resize by default
  box-shadow: var(--entry-inset-shadow); // Use the themed inset shadow
  transition: border-color var(--animation-duration-fast) var(--animation-ease-out-cubic),
              box-shadow var(--animation-duration-fast) var(--animation-ease-out-cubic);
  width: 100%; // Default to full width, can be overridden by parent container or inline style

  &::placeholder {
    color: var(--view-fg-color); // Consistent with .adw-entry
    opacity: 0.5;                // Consistent with .adw-entry
  }

  &:focus {
    border-color: var(--accent-color); // Use global accent color for focus
    // Adwaita focus ring for entries:
    box-shadow: var(--entry-inset-shadow), 0 0 0 2px var(--accent-color); // Use solid accent color for focus ring, similar to .adw-entry
    outline: none;
  }

  &:disabled {
    background-color: var(--entry-disabled-bg-color);
    border-color: var(--entry-disabled-border-color);
    color: var(--disabled-fg-color);
    box-shadow: none;
    cursor: not-allowed;
    pointer-events: none;
  }
}
