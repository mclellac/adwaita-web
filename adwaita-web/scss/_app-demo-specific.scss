// Styles moved from app-demo/templates/base.html
@use 'variables'; // Added to access SASS variables like $adw-dark-5

// Header styles
.adw-header-bar__start .site-title-link {
    text-decoration: none;
    color: inherit;
    font-weight: var(--heading-font-weight, 700); // Use CSS var, fallback to bold
}
.adw-header-bar__start .site-title-link:hover,
.adw-header-bar__start .site-title-link:focus {
    text-decoration: none;
}
.adw-header-bar__end {
    display: flex;
    align-items: center;
    gap: var(--spacing-s);
}
.header-search-form {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
}
.profile-avatar-button img, .profile-avatar-button .adw-avatar-text {
    vertical-align: middle;
}

// Footer styles
.app-footer {
    border-top: 1px solid var(--border-color);
    padding: var(--spacing-s) var(--spacing-m);
    margin-top: var(--spacing-xl);
    background-color: var(--window-bg-color); // Adwaita window background
}

.app-footer .adw-toolbar__end {
    display: flex;
    align-items: center;
    gap: var(--spacing-s);
}

// --- Styles from index.html ---
.page-title-centered {
    text-align: center;
    margin-bottom: var(--spacing-l);
}

.meta-section {
    margin-top: var(--spacing-xs);
}

.meta-label-strong {
    font-weight: bold; // Or use SASS var $font-weight-bold
}

.app-status-page-icon { // For specific sizing if default adw-status-page-icon isn't enough
    font-size: 3rem; // Was inline
}

.pagination-controls {
    margin-top: var(--spacing-l);
    display: flex;
    justify-content: center;
    gap: var(--spacing-xs);

    // .adw-button.flat[disabled],
    // .adw-button[disabled] {
    //     // Base .adw-button already handles disabled state (opacity, cursor, pointer-events)
    //     // color: var(--text-color-secondary); // This would be an app-specific override if desired
    // }
    .adw-button.active { // Style for the active/current page button in pagination
        font-weight: bold; // Make it bold
        // Note: This does not use the .active state from _button.scss which changes background,
        // as this is for indicating current item, not a toggle state.
    }
}


// --- Styles from post.html ---
.post-meta-terms-label { // For "Categories:", "Tags:" labels in post view
    font-weight: bold;
}

.post-actions-container {
    display: flex; // Added display flex
    justify-content: flex-end;
    margin-top: var(--spacing-l);
    gap: var(--spacing-s); // Added gap for buttons
}

// For the form that contains only a delete button
.delete-post-form-inline {
    display: inline; // For forms that are just a button
    margin: 0; // Reset margin for inline forms
}

.comment-header-box {
    align-items: center;
    // gap: var(--spacing-s); // If direct children of adw-box need gap
}

.comment-author-link-strong {
    font-weight: bold;
}

.comment-delete-form-container {
    text-align: right;
    margin-top: var(--spacing-s);
}

.comment-form-field-row { // Specific to comment text area if needed beyond global .form-field-row
    // margin-top: var(--spacing-xs); // This was too little, form-field-row default is --spacing-s
}
.comment-form-actions { // Styles for the container of the submit button in comment form
    @extend .form-actions-container;
    @extend .form-actions-end;
    // This specific instance might need to override the background/border from .form-actions-container
    // if it's meant to be transparent within its parent (e.g. a card or listbox).
    // For now, it will inherit the white background from .form-actions-container.
    // If it should be transparent:
    // background-color: transparent;
    // border-top: none;
    // padding: var(--spacing-s) 0; // Reset padding if background/border removed
}

.related-posts-container {
    margin-top: var(--spacing-xl);
}

.back-to-posts-container {
    display: flex; // Added
    justify-content: center;
    margin-top: var(--spacing-xl);
}

// --- Styles from create_post.html & edit_post.html (some may be general form styles) ---
.form-page-header { // For centered headers on form pages like create_post
    text-align: center;
    margin-bottom: var(--spacing-l);
}

// General form field structure if not using adw-entry-row or adw-action-row
.form-field-row {
    margin-top: var(--spacing-s); // Default top margin for a form field row
    &.content-field-row { // Specific for the larger content textarea
         // margin-top: var(--spacing-s); // Already set by .form-field-row
    }
    .form-field-label-block { // For labels that should be block display
        display: block;
        margin-bottom: var(--spacing-xs);
    }
    .form-field-error-container { // Container for error messages for these rows
        margin-top: var(--spacing-xs);
    }
}

.form-actions-container { // General form actions (save, publish, cancel etc.)
    margin-top: var(--spacing-l);
    padding: var(--spacing-m);
    display: flex;
    align-items: center;
    gap: var(--spacing-s);
    background-color: var(--list-row-bg-color);
    border-top: 1px solid var(--border-color);

    &.form-actions-end {
        justify-content: flex-end;
    }
    &.form-actions-space-between {
        justify-content: space-between;
    }
}

// --- Styles from profile.html ---
.profile-page-main-box {
    padding-top: var(--spacing-l);
}

.profile-pagination-box { // For the adw-box containing pagination controls
    margin-top: var(--spacing-l);
}

// Prose styling for user-generated content (post content, comments, bio)
.styled-text-content {
    line-height: 1.6;
    p { margin-bottom: var(--spacing-m); }
    h1, h2, h3, h4, h5, h6 {
        margin-top: var(--spacing-l);
        margin-bottom: var(--spacing-s);
        font-weight: var(--heading-font-weight, 700);
    }
    h1 { font-size: var(--font-size-h1); }
    h2 { font-size: var(--font-size-h2); }
    h3 { font-size: var(--font-size-h3); }
    h4 { font-size: var(--font-size-h4); }
    ul, ol {
        margin-bottom: var(--spacing-m);
        padding-left: var(--spacing-l);
    }
    li { margin-bottom: var(--spacing-xs); }
    blockquote {
        margin: var(--spacing-m) 0;
        padding: var(--spacing-s) var(--spacing-m);
        border-left: 4px solid var(--border-color);
        background-color: var(--button-bg-color);
        color: var(--text-color-secondary);
        font-style: italic;
        p:last-child { margin-bottom: 0; }
    }
    pre {
        background-color: var(--headerbar-bg-color);
        color: var(--text-color);
        padding: var(--spacing-m);
        border-radius: var(--border-radius-medium);
        overflow-x: auto;
        font-family: var(--monospace-font-family);
        font-size: 0.9em;
        line-height: 1.4;
    }
    code {
        font-family: var(--monospace-font-family);
        background-color: rgba(variables.$adw-dark-5, 0.05);
        padding: 0.1em 0.3em;
        border-radius: var(--border-radius-small);
        font-size: 0.9em;
    }
    :root.theme-dark .styled-text-content code {
        background-color: rgba(variables.$adw-light-1, 0.08);
    }
    pre code {
      background-color: transparent;
      padding: 0;
      border-radius: 0;
      font-size: inherit;
    }
    a {
        color: var(--link-color);
        text-decoration: underline;
        &:hover { color: var(--link-hover-color); }
    }
    hr {
        border: none;
        border-top: 1px solid var(--divider-color);
        margin: var(--spacing-l) 0;
    }
}

hr.section-divider {
    border: none;
    border-top: 1px solid var(--divider-color);
    margin: var(--spacing-xl) 0;
}

// --- New Sidebar Layout Styles ---
html, body { height: 100%; margin: 0; display: flex; flex-direction: column; }
body { overflow: hidden; }
.adw-header-bar { flex-shrink: 0; }
.app-body-container { display: flex; flex-grow: 1; overflow: hidden; }
.app-sidebar {
    width: 240px;
    flex-shrink: 0;
    background-color: var(--sidebar-bg-color);
    border-right: 1px solid var(--border-color);
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    .sidebar-nav {
        // This targets the <nav class="adw-list-box flat sidebar-nav">
        &.adw-list-box.flat {
            border: none; // Remove default listbox border
            border-radius: 0; // Remove default listbox radius
            background-color: transparent; // Ensure it's transparent
            padding-top: var(--spacing-s); // Add some padding at the top and bottom of the nav block
            padding-bottom: var(--spacing-s);

            .adw-action-row {
                // Adjust padding if needed, default is var(--spacing-m)
                // padding-left: var(--spacing-l); // Example: Increase padding if desired
                // padding-right: var(--spacing-l);
                border-bottom: none; // No separators between nav items
                border-radius: var(--border-radius-medium); // Rounded corners for each nav item
                margin: 0 var(--spacing-s) var(--spacing-xs) var(--spacing-s); // Margin around each item

                &:hover {
                    background-color: rgba(var(--text-color-rgb, 0,0,0), 0.06);
                }
                // For selected state
                &.selected {
                    background-color: rgba(var(--accent-color-rgb, 53,132,228), 0.15); // Default to blueish accent for example
                    .adw-action-row-title {
                        color: var(--accent-color);
                        font-weight: bold;
                    }
                    .adw-action-row-icon { // Ensure icon also gets accent color
                        color: var(--accent-color);
                    }
                }
                // Ensure default (non-selected) icon and title colors are standard
                &:not(.selected) {
                    .adw-action-row-title {
                        color: var(--text-color);
                        font-weight: normal; // Ensure non-selected titles are normal weight
                    }
                    .adw-action-row-icon {
                        color: var(--text-color-secondary); // Or var(--text-color) if preferred
                    }
                }
            }
        }
        // Remove old ul/li/a styles that are no longer applicable
        // ul { /* ... */ } (removed)
        // li { /* ... */ } (removed)
        // a { /* ... */ } (removed, now covered by .adw-action-row)
    }
}
.app-content-area {
    flex-grow: 1; display: flex; flex-direction: column; overflow-y: auto;
    background-color: var(--window-bg-color);
    .page-content-wrapper { flex-grow: 1; }
    .main-content { padding-top: var(--spacing-xl); padding-bottom: var(--spacing-xl); }
    .app-footer { flex-shrink: 0; }
}

// --- Styles from edit_profile.html ---
.profile-bio-textarea { margin-top: var(--spacing-xs); width: 100%; }
.profile-photo-widget-container { display: flex; flex-direction: column; align-items: flex-end; gap: var(--spacing-s); }
.hidden-file-input { display: none; }
.cropper-container-wrapper {
    width: 150px; height: 150px;
    &.hidden { display: none; }
}
.current-photo-display { display: flex; align-items: center; gap: var(--spacing-xs); }
.edit-profile-form-actions {
    @extend .form-actions-container;
}

// --- Responsive Sidebar Styles ---
$app-sidebar-breakpoint: 768px;
.app-sidebar-toggle { display: none; }
@media (max-width: #{$app-sidebar-breakpoint - 1px}) {
    .app-sidebar-toggle { display: inline-flex; }
    .profile-avatar-button { display: none; }
    .app-sidebar {
        position: fixed; left: 0; top: 0;
        height: 100%; z-index: 1000;
        transform: translateX(-100%);
        transition: transform 0.25s ease-in-out;
        box-shadow: var(--dialog-box-shadow);
        &.sidebar-open { transform: translateX(0); }
    }
    .app-sidebar-backdrop {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background-color: rgba(0,0,0,0.3); z-index: 999;
        opacity: 0; visibility: hidden;
        transition: opacity 0.25s ease-in-out, visibility 0s 0.25s linear;
        &.active { opacity: 1; visibility: visible; transition-delay: 0s; }
    }
}

.blog-posts-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(min(100%, 300px), 1fr));
  gap: var(--spacing-l);
  padding: var(--spacing-s) 0;
}

// --- Card Styles (app-demo specific extensions/compositions of .adw-card) ---
.blog-post-item-card.adw-card {
  // Base styles like background, border, radius, shadow, padding are inherited from .adw-card
  // display: flex; flex-direction: column; // This is default for .adw-card now
  .blog-post-card__header {
    margin-bottom: var(--spacing-s);
    .blog-post-card__title {
      margin-bottom: var(--spacing-xxs);
      a { color: inherit; text-decoration: none; &:hover { text-decoration: underline; } }
    }
    .blog-post-card__meta { font-size: var(--font-size-small); color: var(--text-color-secondary); }
  }
  .blog-post-card__excerpt {
    margin-bottom: var(--spacing-m); flex-grow: 1;
    p:last-child { margin-bottom: 0; }
  }
  .blog-post-card__footer {
    margin-top: auto;
    padding-top: var(--spacing-s);
    border-top: 1px solid var(--divider-color);
    display: flex; justify-content: space-between; align-items: center; gap: var(--spacing-s);
    .blog-post-card__terms {
      display: flex; flex-direction: column;
      gap: var(--spacing-xs);
      .meta-section { margin-top: 0; }
    }
  }
  &:hover {
    border-color: var(--card-hover-border-color, var(--accent-color));
    box-shadow: var(--card-hover-box-shadow, 0 2px 4px rgba(0,0,0,0.07), 0 4px 12px rgba(0,0,0,0.07));
  }
}

.blog-content-card.adw-card {
  // Base styles inherited from .adw-card
  // Overriding padding from base .adw-card if it was var(--spacing-m)
  padding: var(--spacing-l);
  margin-bottom: var(--spacing-xl);
  .post-header { margin-bottom: var(--spacing-l); }
  .post-content { margin-bottom: var(--spacing-l); }
  .share-buttons-section, .post-actions-container {
    margin-top: var(--spacing-l); padding-top: var(--spacing-l); border-top: 1px solid var(--divider-color);
  }
}

.comment-card.adw-card { // Added .adw-card here
  // Base styles inherited from .adw-card
  // Overriding padding and border-radius from base .adw-card if needed
  border-radius: var(--card-border-radius, var(--border-radius-default)); // Potentially smaller radius
  padding: var(--spacing-s);
  margin-bottom: var(--spacing-s);
  // No box-shadow by default if inheriting from a base .adw-card that has one,
  // unless specifically added here or if .adw-card's shadow is desired.
  // box-shadow: none; // If it should be flatter than base .adw-card

  .comment-header { margin-bottom: var(--spacing-xs); }
  .comment-text { margin-bottom: var(--spacing-xs); font-size: var(--font-size-base); line-height: var(--line-height-base); }
  .comment-actions {
    display: flex; justify-content: flex-end; align-items: center;
    gap: var(--spacing-s);
    border-top: 1px solid var(--divider-color);
    padding-top: var(--spacing-xs); margin-top: var(--spacing-s);
  }
  .reply-form-container {
    border-top: 1px dashed var(--divider-color);
    padding-top: var(--spacing-s); margin-top: var(--spacing-s);
    .adw-textarea { min-height: 60px; }
  }
}

.comments-list.adw-list-box.flat {
    .comment-card { border-bottom: none; }
    background-color: transparent; border: none; box-shadow: none;
}

// Gallery Specific Styles (from profile.html)
.profile-gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: var(--spacing-l);
    padding-top: var(--spacing-l);
}
.gallery-photo-card {
    display: flex; flex-direction: column; overflow: hidden;
}
.gallery-photo-image {
    width: 100%; height: 150px; object-fit: cover;
    border-bottom: 1px solid var(--border-color);
}
.gallery-photo-caption {
    padding: var(--spacing-s);
    p { margin: 0; font-size: var(--font-size-caption); color: var(--text-color-secondary); }
}
.gallery-photo-actions {
    padding: var(--spacing-xs) var(--spacing-s);
    text-align: right;
    // .adw-button.small-button has been moved to _button.scss as .adw-button.small
    // Ensure HTML is updated to use class="adw-button small"
}
.gallery-upload-form {
    .gallery-caption-textarea {
        font-family: var(--font-family-sans-serif);
        min-height: 60px;
        margin-top: var(--spacing-xxs);
    }
    .form-actions-end {
        padding: var(--spacing-m);
        text-align: right;
        background-color: transparent;
        border-top: none;
        margin-top: 0;
    }
}
.profile-gallery-upload-box {
    margin-bottom: var(--spacing-xl);
}
