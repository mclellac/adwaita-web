@use 'variables';

.adw-expander-row {
  // Uses .adw-action-row as its base for the main row part
  // So, no need to redefine title, subtitle, prefix, basic layout here.
  // We only add styles for the expander arrow and the content area.

  // Styling for the header part of the expander row (which is an action row)
  // to ensure it's clickable and shows the arrow correctly.
  > .adw-action-row {
    cursor: pointer;
    position: relative; // Keep for positioning if needed, though suffix slot handles layout

    // Chevron icon styling (targets the AdwIcon component)
    .adw-expander-row-chevron.adw-icon {
      transition: transform 0.15s ease-in-out;
      transform: rotate(-90deg); // Point right for LTR when collapsed
      opacity: 0.7;
      font-size: 0.8em; // Make chevron slightly smaller if needed
      // margin-left: var(--spacing-s); // AdwActionRow suffix slot should handle spacing
    }

    &.expanded {
      .adw-expander-row-chevron.adw-icon {
        transform: rotate(0deg); // Point down when expanded
      }
    }
  }

  .adw-expander-row-content-area {
    padding: var(--spacing-m) var(--spacing-l);
    // Indentation logic might need review. If prefix area in action-row has fixed width, use that.
    // Example: padding-left: calc(var(--prefix-width, 32px) + var(--spacing-l));
    padding-left: calc(var(--spacing-l) + var(--spacing-m) + 5px); // Current logic
    background-color: var(--expander-content-bg-color); // Use new variable
    border-bottom: var(--border-width) solid var(--borders-color); // Use theme-aware --borders-color
    display: none;

    &.visible {
      display: block;
    }
  }

   &:last-child > .adw-expander-row-content-area {
        border-bottom-left-radius: var(--border-radius-default); // Match listbox radius
        border-bottom-right-radius: var(--border-radius-default);
        // If this is the very last row of a listbox, its border-bottom should be none.
        // This might need to be handled by .adw-list-box > .adw-expander-row:last-child > .adw-expander-row-content-area
        // if the expander row itself doesn't have a bottom border.
   }
}

// Dark theme adjustments are now handled by theme-aware variables like --borders-color and --expander-content-bg-color.
// .dark-theme .adw-expander-row,
// body.dark-theme .adw-expander-row {
//   .adw-expander-row-content-area {
//     border-bottom-color: var(--border-color-dark);
//   }
// }
