:root {
  // These are the "chosen" accent variables that themes will use.
  // JS will update these to point to the currently selected accent's specific shades.
  // Defaulting to blue here.
  --chosen-accent-light-bg: var(--accent-blue-light-bg);
  --chosen-accent-light-fg: var(--accent-blue-light-fg);
  --chosen-accent-light-standalone: var(--accent-blue-standalone);
  --chosen-accent-light-hover-bg: var(--accent-blue-light-bg-hover);
  --chosen-accent-light-active-bg: var(--accent-blue-light-bg-active);

  --chosen-accent-dark-bg: var(--accent-blue-dark-bg);
  --chosen-accent-dark-fg: var(--accent-blue-dark-fg);
  --chosen-accent-dark-standalone: var(--accent-blue-dark-standalone);
  --chosen-accent-dark-hover-bg: var(--accent-blue-dark-bg-hover);
  --chosen-accent-dark-active-bg: var(--accent-blue-dark-bg-active);
}

@mixin light-theme {
  // Default Accent - now points to the "chosen" accent variables for light theme
  --accent-color: var(--chosen-accent-light-standalone);
  --accent-bg-color: var(--chosen-accent-light-bg);
  --accent-fg-color: var(--chosen-accent-light-fg);
  --accent-bg-hover-color: var(--chosen-accent-light-hover-bg);
  --accent-bg-active-color: var(--chosen-accent-light-active-bg);

  // Destructive State - these are fixed, not affected by accent choice for light theme
  --destructive-color: var(--adw-red-4);         // #c01c28; @destructive_color Light
  --destructive-bg-color: var(--adw-red-3);      // #e01b24; @destructive_bg_color Light
  --destructive-fg-color: var(--adw-light-1);      // #ffffff; @destructive_fg_color Light
  --destructive-bg-hover-color: var(--accent-red-light-bg-hover); // Custom, derived from red accent
  --destructive-bg-active-color: var(--accent-red-light-bg-active); // Custom, derived from red accent

  // Success State
  --success-color: #1b8553;           // @success_color Light (No direct adw-green-X match for this specific shade, use official value)
  --success-bg-color: var(--adw-green-4);        // #2ec27e; @success_bg_color Light
  --success-fg-color: var(--adw-light-1);        // #ffffff; @success_fg_color Light

  // Warning State
  --warning-color: #9c6e03;           // @warning_color Light (No direct adw-yellow-X match, use official value)
  --warning-bg-color: var(--adw-yellow-5);        // #e5a50a; @warning_bg_color Light
  --warning-fg-color: rgba(0, 0, 0, 0.8); // @warning_fg_color Light

  // Error State
  --error-color: var(--adw-red-4);             // #c01c28; @error_color Light (same as destructive)
  --error-bg-color: var(--adw-red-3);          // #e01b24; @error_bg_color Light (same as destructive)
  --error-fg-color: var(--adw-light-1);          // #ffffff; @error_fg_color Light (same as destructive)

  // Info colors (using blue accent as per common practice, though Libadwaita doesn't define specific "info" state colors)
  --info-color: var(--accent-blue-standalone); // Standalone blue
  --info-bg-color: var(--accent-blue-light-bg); // Light blue bg
  --info-fg-color: var(--accent-blue-light-fg); // White fg

  // Base UI Colors from Libadwaita 1.5
  --window-bg-color: #fafafa;                     // @window_bg_color Light
  --window-fg-color: rgba(0, 0, 0, 0.8);         // @window_fg_color Light
  --view-bg-color: #ffffff;                       // @view_bg_color Light
  --view-fg-color: rgba(0, 0, 0, 0.8);           // @view_fg_color Light

  --headerbar-bg-color: #ffffff;                  // @headerbar_bg_color Light (Libadwaita 1.5)
  --headerbar-fg-color: rgba(0, 0, 0, 0.8);       // @headerbar_fg_color Light
  --headerbar-border-color: rgba(0, 0, 0, 0.8);   // @headerbar_border_color Light (Libadwaita 1.5)
  --headerbar-backdrop-color: #fafafa;            // @headerbar_backdrop_color Light (alias of window_bg_color)
  --headerbar-shade-color: rgba(0, 0, 0, 0.12);   // @headerbar_shade_color Light (Libadwaita 1.5)
  --headerbar-darker-shade-color: rgba(0, 0, 0, 0.12); // @headerbar_darker_shade_color Light

  --sidebar-bg-color: #ebebeb;                    // @sidebar_bg_color Light (Libadwaita 1.5)
  --sidebar-fg-color: rgba(0, 0, 0, 0.8);         // @sidebar_fg_color Light
  --sidebar-backdrop-color: #f2f2f2;              // @sidebar_backdrop_color Light (Libadwaita 1.5)
  --sidebar-border-color: rgba(0, 0, 0, 0.07);    // @sidebar_border_color Light (Libadwaita 1.5)
  --sidebar-shade-color: rgba(0, 0, 0, 0.07);     // @sidebar_shade_color Light (Libadwaita 1.5)

  --secondary-sidebar-bg-color: #f3f3f3;          // @secondary_sidebar_bg_color Light (Libadwaita 1.5)
  --secondary-sidebar-fg-color: rgba(0, 0, 0, 0.8); // @secondary_sidebar_fg_color Light
  --secondary-sidebar-backdrop-color: #f6f6f6;    // @secondary_sidebar_backdrop_color Light (Libadwaita 1.5)
  --secondary-sidebar-border-color: rgba(0, 0, 0, 0.07); // @secondary_sidebar_border_color Light
  --secondary-sidebar-shade-color: rgba(0, 0, 0, 0.07);  // @secondary_sidebar_shade_color Light

  --card-bg-color: #ffffff;                       // @card_bg_color Light
  --card-fg-color: rgba(0, 0, 0, 0.8);           // @card_fg_color Light
  --card-shade-color: rgba(0, 0, 0, 0.07);        // @card_shade_color Light (Libadwaita 1.5)

  --popover-bg-color: #ffffff;                    // @popover_bg_color Light
  --popover-fg-color: rgba(0, 0, 0, 0.8);        // @popover_fg_color Light
  --popover-shade-color: rgba(0, 0, 0, 0.07);     // @popover_shade_color Light (Libadwaita 1.5)

  --dialog-bg-color: #fafafa;                     // @dialog_bg_color Light (same as window_bg_color)
  --dialog-fg-color: rgba(0, 0, 0, 0.8);         // @dialog_fg_color Light

  --thumbnail-bg-color: #ffffff;                  // @thumbnail_bg_color Light
  --thumbnail-fg-color: rgba(0, 0, 0, 0.8);      // @thumbnail_fg_color Light

  // --borders-color: var(--adw-light-4); // #c0bfbc; @borders Light - Libadwaita uses alpha(currentColor, 0.15). Consider if fixed color is acceptable.
  --borders-color: rgba(0,0,0,0.15); // Tentative: Using black with alpha, closer to Libadwaita's currentColor concept for light theme.
  --shade-color: rgba(0, 0, 0, 0.07);             // @shade_color Light (Libadwaita 1.5)
  --scrollbar-outline-color: #ffffff;  // @scrollbar_outline_color Light

  // Component-specific, kept from original if not directly covered by Libadwaita general colors
  --button-bg-color: var(--adw-light-2);
  --button-fg-color: rgba(0, 0, 0, 0.8);
  --button-border-color: var(--adw-light-4);
  --button-hover-bg-color: var(--adw-light-3);
  --button-active-bg-color: var(--adw-light-4);

  --button-highlight-light: rgba(255, 255, 255, 0.7);
  --button-shadow-light: rgba(0, 0, 0, 0.1);
  --button-dropshadow-light: rgba(0, 0, 0, 0.08);
  --button-disabled-bg-light: var(--adw-light-3);
  --button-disabled-fg-light: var(--adw-light-5);

  --button-flat-bg-color: transparent;
  --button-flat-hover-bg-color: rgba(0, 0, 0, 0.05);
  --button-flat-active-bg-color: rgba(0, 0, 0, 0.1);

  --link-color: var(--accent-bg-color);
  --link-visited-color: var(--adw-dark-2); // #5a5a5a is adw-dark-2

  --progress-bar-track-color: var(--shade-color);
  --progress-bar-fill-color: var(--accent-bg-color);

  --toast-bg-color: #303030; // Adwaita @toast_bg_color (dark surface by default)
  --toast-fg-color: var(--adw-light-1); // #ffffff; Adwaita @toast_fg_color
  --toast-box-shadow: var(--popover-box-shadow-light);
  --secondary-text-color: rgba(0,0,0,0.7);
  --dialog-box-shadow: var(--dialog-box-shadow-light);
  --dialog-backdrop-color: rgba(0, 0, 0, 0.25);

  --list-row-hover-bg-color: rgba(0,0,0,0.06); // Aligned with Libadwaita 1.7 @list_row_hovered_bg_color (light)
  --list-row-active-bg-color: rgba(0,0,0,0.08); // Kept as slightly more prominent than hover
  --list-row-selected-bg-color: var(--adw-blue-1); // #99c1f1
  --list-row-selected-fg-color: var(--adw-blue-5); // #1a5fb4
  --expander-content-bg-color: rgba(0,0,0,0.03);
  --list-separator-color: rgba(0,0,0,0.12); // Aligned with Libadwaita 1.7 @list_row_separator_color (light)

  --entry-border-color: var(--adw-light-4, #c0bfbc); // Default border for standalone entries
  --entry-disabled-bg-color: rgba(0,0,0,0.04);
  --entry-disabled-border-color: rgba(0,0,0,0.1);
  --entry-inset-shadow-light: rgba(0,0,0,0.03);

  --disabled-fg-color: rgba(0,0,0,0.35); // General disabled foreground

  --switch-knob-bg-color: #ffffff;
  --switch-slider-off-bg-color: rgba(0,0,0,0.15);
  --switch-knob-disabled-bg-color: rgba(0,0,0,0.2);
  --switch-slider-disabled-off-bg-color: rgba(0,0,0,0.1);
}

@mixin dark-theme {
  // Default Accent - now points to the "chosen" accent variables for dark theme
  --accent-color: var(--chosen-accent-dark-standalone);
  --accent-bg-color: var(--chosen-accent-dark-bg);
  --accent-fg-color: var(--chosen-accent-dark-fg);
  --accent-bg-hover-color: var(--chosen-accent-dark-hover-bg);
  --accent-bg-active-color: var(--chosen-accent-dark-active-bg);

  // Destructive State - these are fixed, not affected by accent choice for dark theme
  --destructive-color: #ff7b63;         // @destructive_color Dark (Official value, adw-red-1 is #f66151)
  --destructive-bg-color: var(--adw-red-4);      // #c01c28; @destructive_bg_color Dark
  --destructive-fg-color: var(--adw-light-1);      // #ffffff; @destructive_fg_color Dark
  --destructive-bg-hover-color: var(--accent-red-dark-bg-hover); // Custom, derived from red accent
  --destructive-bg-active-color: var(--accent-red-dark-bg-active); // Custom, derived from red accent

  // Success State
  --success-color: var(--adw-green-1);           // #8ff0a4; @success_color Dark
  --success-bg-color: var(--adw-green-5);        // #26a269; @success_bg_color Dark
  --success-fg-color: var(--adw-light-1);        // #ffffff; @success_fg_color Dark

  // Warning State
  --warning-color: var(--adw-yellow-2);           // #f8e45c; @warning_color Dark
  --warning-bg-color: #cd9309;                    // @warning_bg_color Dark (Libadwaita 1.5)
  --warning-fg-color: rgba(0, 0, 0, 0.8);       // @warning_fg_color Dark

  // Error State
  --error-color: #ff7b63;             // @error_color Dark (same as destructive)
  --error-bg-color: var(--adw-red-4);          // #c01c28; @error_bg_color Dark (same as destructive)
  --error-fg-color: var(--adw-light-1);          // #ffffff; @error_fg_color Dark (same as destructive)

  // Info colors (using blue accent as per common practice)
  --info-color: var(--accent-blue-dark-standalone);
  --info-bg-color: var(--accent-blue-dark-bg);
  --info-fg-color: var(--accent-blue-dark-fg);

  // Base UI Colors from Libadwaita 1.5 / Visual inspection for 1.7
  --window-bg-color: #242424;                     // @window_bg_color Dark
  --window-fg-color: var(--adw-light-1);          // #ffffff; @window_fg_color Dark
  --view-bg-color: #1e1e1e;                       // @view_bg_color Dark
  --view-fg-color: var(--adw-light-1);            // #ffffff; @view_fg_color Dark

  --headerbar-bg-color: #303030;                  // @headerbar_bg_color Dark
  --headerbar-fg-color: var(--adw-light-1);       // #ffffff; @headerbar_fg_color Dark
  --headerbar-border-color: #ffffff;              // @headerbar_border_color Dark (Libadwaita 1.5)
  --headerbar-backdrop-color: var(--window-bg-color); // @headerbar_backdrop_color Dark (alias of window_bg_color)
  --headerbar-shade-color: rgba(0, 0, 0, 0.36);   // @headerbar_shade_color Dark (Libadwaita 1.5)
  --headerbar-darker-shade-color: rgba(0, 0, 0, 0.9); // @headerbar_darker_shade_color Dark (Libadwaita 1.5)

  --sidebar-bg-color: #303030;                    // @sidebar_bg_color Dark (Libadwaita 1.5)
  --sidebar-fg-color: var(--adw-light-1);         // #ffffff; @sidebar_fg_color Dark
  --sidebar-backdrop-color: #2a2a2a;              // @sidebar_backdrop_color Dark (Libadwaita 1.5)
  --sidebar-border-color: rgba(0, 0, 0, 0.36);    // @sidebar_border_color Dark (Libadwaita 1.5)
  --sidebar-shade-color: rgba(0, 0, 0, 0.25);     // @sidebar_shade_color Dark (Libadwaita 1.5)

  --secondary-sidebar-bg-color: #2a2a2a;          // @secondary_sidebar_bg_color Dark (Libadwaita 1.5)
  --secondary-sidebar-fg-color: var(--adw-light-1); // #ffffff; @secondary_sidebar_fg_color Dark
  --secondary-sidebar-backdrop-color: #272727;    // @secondary_sidebar_backdrop_color Dark (Libadwaita 1.5)
  --secondary-sidebar-border-color: rgba(0, 0, 0, 0.36); // @secondary_sidebar_border_color Dark (Libadwaita 1.5)
  --secondary-sidebar-shade-color: rgba(0, 0, 0, 0.25);  // @secondary_sidebar_shade_color Dark (Libadwaita 1.5)

  --card-bg-color: rgba(255, 255, 255, 0.08);     // @card_bg_color Dark (Libadwaita 1.5)
  --card-fg-color: var(--adw-light-1);            // #ffffff; @card_fg_color Dark
  --card-shade-color: rgba(0, 0, 0, 0.36);        // @card_shade_color Dark (Libadwaita 1.5)

  --popover-bg-color: #383838;                    // @popover_bg_color Dark
  --popover-fg-color: var(--adw-light-1);         // #ffffff; @popover_fg_color Dark
  --popover-shade-color: rgba(0, 0, 0, 0.25);     // @popover_shade_color Dark (Libadwaita 1.5)

  --dialog-bg-color: #383838;                     // @dialog_bg_color Dark
  --dialog-fg-color: var(--adw-light-1);          // #ffffff; @dialog_fg_color Dark

  --thumbnail-bg-color: #383838;                  // @thumbnail_bg_color Dark (Using popover/dialog bg as base)
  --thumbnail-fg-color: var(--adw-light-1);       // #ffffff; @thumbnail_fg_color Dark

  // --borders-color: rgba(255, 255, 255, 0.12); // @borders Dark - Libadwaita uses alpha(currentColor, 0.15) or 0.5 for high contrast.
  --borders-color: rgba(255,255,255,0.15); // Tentative: Using white with alpha for dark theme.
  --shade-color: rgba(0, 0, 0, 0.25);             // @shade_color Dark (Libadwaita 1.5)
  --scrollbar-outline-color: rgba(0, 0, 0, 0.5);  // @scrollbar_outline_color Dark (Libadwaita 1.5)

  // Component-specific, kept from original
  --button-bg-color: var(--adw-dark-2);           // #4a4a4a; Standard button background
  --button-fg-color: var(--adw-light-1);
  --button-border-color: rgba(255, 255, 255, 0.1);
  --button-hover-bg-color: var(--adw-dark-1);     // #5a5a5a; Slightly lighter hover
  --button-active-bg-color: #676767;              // Custom grey, close to var(--adw-dark-1) / var(--adw-dark-2) mid-point
                                                  // Could be var(--adw-dark-1) or a slightly lighter custom shade if necessary.
                                                  // For now, keeping #676767 as it might be intentional.

  --button-highlight-dark: rgba(255, 255, 255, 0.07);
  --button-shadow-dark: rgba(0, 0, 0, 0.3);
  --button-dropshadow-dark: rgba(0, 0, 0, 0.25);
  --button-disabled-bg-dark: var(--adw-dark-3);
  --button-disabled-fg-dark: var(--adw-dark-1);

  --button-flat-bg-color: transparent;
  --button-flat-hover-bg-color: rgba(255, 255, 255, 0.08);
  --button-flat-active-bg-color: rgba(255, 255, 255, 0.12);

  --link-color: var(--accent-bg-color);
  --link-visited-color: var(--adw-light-4); // #c0c0c0 is adw-light-4

  --progress-bar-track-color: var(--shade-color);
  --progress-bar-fill-color: var(--accent-bg-color);

  --toast-bg-color: #303030;                      // @toast_bg_color Dark
  --toast-fg-color: var(--adw-light-1);           // #ffffff; @toast_fg_color Dark
  --toast-box-shadow: var(--popover-box-shadow-dark);
  --secondary-text-color: rgba(255,255,255,0.7);
  --dialog-box-shadow: var(--dialog-box-shadow-dark);
  --dialog-backdrop-color: rgba(0, 0, 0, 0.4);

  --list-row-hover-bg-color: rgba(255,255,255,0.08); // Aligned with Libadwaita 1.7 @list_row_hovered_bg_color (dark)
  --list-row-active-bg-color: rgba(255,255,255,0.1);  // Kept as slightly more prominent than hover
  --list-row-selected-bg-color: var(--adw-blue-5); // #1a5fb4
  --list-row-selected-fg-color: var(--adw-blue-1); // #99c1f1
  --expander-content-bg-color: rgba(255,255,255,0.03);
  --list-separator-color: rgba(255,255,255,0.12); // Aligned with Libadwaita 1.7 @list_row_separator_color (dark)

  --entry-border-color: var(--borders-color); // Default border for standalone entries (uses general dark border color)
  --entry-disabled-bg-color: rgba(255,255,255,0.04);
  --entry-disabled-border-color: rgba(255,255,255,0.1);
  --entry-inset-shadow-dark: rgba(0,0,0,0.15);

  --disabled-fg-color: rgba(255,255,255,0.35); // General disabled foreground

  --switch-knob-bg-color: #ffffff;
  --switch-slider-off-bg-color: rgba(255,255,255,0.15);
  --switch-knob-disabled-bg-color: rgba(255,255,255,0.2);
  --switch-slider-disabled-off-bg-color: rgba(255,255,255,0.1);
}

// Helper Variables (inspired by libadwaita, but not direct libadwaita variables)
:root {
  // Font Variables (use libadwaita standard system fonts)
  --document-font-family: 'Cantarell', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  --monospace-font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
  --font-size-base: 10pt; // Base font size (libadwaita uses relative units, this is an equivalent)
  --font-size-small: 8pt;
  --font-size-large: 12pt;
  --font-size-h1: 18pt;
  --font-size-h2: 16pt;
  --font-size-h3: 14pt;
  --font-size-h4: 12pt;

  --border-radius-small: 3px;
  --border-radius-medium: 4px;
  --border-radius-default: 6px;
  --border-radius-large: 12px;
  --window-radius: var(--border-radius-large);
  --border-width: 1px; // Default border width

  // Spacing (libadwaita uses multiples of 6px and 12px often)
  --spacing-xxs: 3px;
  --spacing-xs: 6px;
  --spacing-s: 9px;
  --spacing-m: 12px;
  --spacing-l: 18px;
  --spacing-xl: 24px;
  --spacing-xxl: 36px;

  // Default row paddings
  --row-padding-vertical-default: var(--spacing-m); // Typically 12px
  --row-padding-horizontal-default: var(--spacing-m); // Typically 12px

  --opacity-disabled: 0.5;
  --icon-opacity: 0.6; // Default opacity for secondary icons like chevrons
  --opacity-hover: 0.8;
  --opacity-active: 0.6;

  // Box Shadows (based on Libadwaita specifications)
  --popover-box-shadow-light: 0 1px 2px 0 rgba(0,0,0,0.1), 0 2px 8px 0 rgba(0,0,0,0.1);
  --popover-box-shadow-dark: 0 1px 2px 0 rgba(0,0,0,0.25), 0 2px 8px 0 rgba(0,0,0,0.25);
  --dialog-box-shadow-light: 0 4px 8px rgba(0,0,0,0.15), 0 1px 4px rgba(0,0,0,0.1);
  --dialog-box-shadow-dark: 0 3px 9px rgba(0,0,0,0.5); // A bit more pronounced for dark themes

  // Border Color (general fallback if not specified by component)
  --border-color-light: rgba(0, 0, 0, 0.12);
  --border-color-dark: rgba(255, 255, 255, 0.07);

  // GNOME Color Palette
  // Blue
  --adw-blue-1: #99c1f1;
  --adw-blue-2: #62a0ea;
  --adw-blue-3: #3584e4;
  --adw-blue-4: #1c71d8;
  --adw-blue-5: #1a5fb4;
  // Green
  --adw-green-1: #8ff0a4;
  --adw-green-2: #57e389;
  --adw-green-3: #33d17a;
  --adw-green-4: #2ec27e;
  --adw-green-5: #26a269;
  // Yellow
  --adw-yellow-1: #f9f06b;
  --adw-yellow-2: #f8e45c;
  --adw-yellow-3: #f6d32d;
  --adw-yellow-4: #f5c211;
  --adw-yellow-5: #e5a50a;
  // Orange
  --adw-orange-1: #ffbe6f;
  --adw-orange-2: #ffa348;
  --adw-orange-3: #ff7800;
  --adw-orange-4: #e66100;
  --adw-orange-5: #c64600;
  // Red
  --adw-red-1: #f66151;
  --adw-red-2: #ed333b;
  --adw-red-3: #e01b24;
  --adw-red-4: #c01c28;
  --adw-red-5: #a51d2d;
  // Purple
  --adw-purple-1: #dc8add;
  --adw-purple-2: #c061cb;
  --adw-purple-3: #9141ac;
  --adw-purple-4: #813d9c;
  --adw-purple-5: #613583;
  // Brown (Used for "Slate" request)
  --adw-brown-1: #cdab8f;
  --adw-brown-2: #b5835a;
  --adw-brown-3: #986a44;
  --adw-brown-4: #865e3c;
  --adw-brown-5: #63452c;
  // Teal (New addition)
  --adw-teal-1: #66d9cf; // Example, pick from a standard palette if available or generate shades
  --adw-teal-2: #40bfb3;
  --adw-teal-3: #29a698;
  --adw-teal-4: #1f8073;
  --adw-teal-5: #15594e;
  // Pink (New addition)
  --adw-pink-1: #f9aac9; // Example, pick from a standard palette if available or generate shades
  --adw-pink-2: #f582ae;
  --adw-pink-3: #f05993;
  --adw-pink-4: #e83178;
  --adw-pink-5: #c41a5f;
  // Light (Greys)
  --adw-light-1: #ffffff;
  --adw-light-2: #f6f5f4;
  --adw-light-3: #deddda;
  --adw-light-4: #c0bfbc;
  --adw-light-5: #9a9996;
  // Dark (Greys)
  --adw-dark-1: #77767b;
  --adw-dark-2: #5e5c64;
  --adw-dark-3: #3d3846;
  --adw-dark-4: #241f31;
  --adw-dark-5: #000000;

  // Definitive Accent Color Variables (to be used by JS)

  // Default Blue Accent (Matches Libadwaita Default)
  --accent-blue-light-bg: var(--adw-blue-3);     // #3584e4
  --accent-blue-light-fg: var(--adw-light-1);     // #ffffff
  --accent-blue-standalone: var(--adw-blue-4);  // #1c71d8 (Libadwaita @accent_color light)

  --accent-blue-dark-bg: var(--adw-blue-3);      // #3584e4 (Libadwaita @accent_bg_color dark)
  --accent-blue-dark-fg: var(--adw-light-1);      // #ffffff (Libadwaita @accent_fg_color dark)
  --accent-blue-dark-standalone: var(--adw-blue-2); // #78aeed (Libadwaita @accent_color dark uses #78aeed, which is closer to adw-blue-2 #62a0ea or adw-blue-1 #99c1f1. Using adw-blue-2 for now)
                                                 // Official @accent_color dark is #78aeed.

  // Green Accent
  --accent-green-light-bg: var(--adw-green-4);    // #2ec27e (Libadwaita @success_bg_color light)
  --accent-green-light-fg: var(--adw-light-1);    // #ffffff
  --accent-green-standalone: var(--adw-green-5);  // #1b8553 (Libadwaita @success_color light is #1b8553, which is adw-green-5 #26a269. Using adw-green-5)
                                                 // Official @success_color light is #1b8553.

  --accent-green-dark-bg: var(--adw-green-5);     // #26a269 (Libadwaita @success_bg_color dark)
  --accent-green-dark-fg: var(--adw-light-1);     // #ffffff
  --accent-green-dark-standalone: var(--adw-green-1); // #8ff0a4 (Libadwaita @success_color dark)

  // Red Accent (Used for Destructive actions)
  --accent-red-light-bg: var(--adw-red-3);        // #e01b24 (Libadwaita @destructive_bg_color light)
  --accent-red-light-fg: var(--adw-light-1);        // #ffffff
  --accent-red-standalone: var(--adw-red-4);      // #c01c28 (Libadwaita @destructive_color light)

  --accent-red-dark-bg: var(--adw-red-4);         // #c01c28 (Libadwaita @destructive_bg_color dark)
  --accent-red-dark-fg: var(--adw-light-1);         // #ffffff
  --accent-red-dark-standalone: var(--adw-red-1);   // #ff7b63 (Libadwaita @destructive_color dark is #ff7b63, closer to adw-red-1 #f66151. Using adw-red-1)
                                                 // Official @destructive_color dark is #ff7b63

  // Yellow Accent (Used for Warning states)
  --accent-yellow-light-bg: var(--adw-yellow-5);  // #e5a50a (Libadwaita @warning_bg_color light)
  --accent-yellow-light-fg: rgba(0,0,0,0.8);    // Dark text for yellow bg (Libadwaita @warning_fg_color light)
  --accent-yellow-standalone: var(--adw-yellow-5); // #9c6e03 (Libadwaita @warning_color light is #9c6e03, which is not directly in palette. Closest is adw-yellow-5 #e5a50a, or a darker custom shade. Using adw-yellow-5 for now, but it's lighter than #9c6e03)
                                                 // Official @warning_color light is #9c6e03. Let's use this directly.
                                                 // --accent-yellow-standalone: #9c6e03; (Corrected below)


  --accent-yellow-dark-bg: var(--adw-yellow-5);   // #cd9309 (Libadwaita @warning_bg_color dark)
  --accent-yellow-dark-fg: rgba(0,0,0,0.8);     // Dark text (Libadwaita @warning_fg_color dark)
  --accent-yellow-dark-standalone: var(--adw-yellow-2); // #f8e45c (Libadwaita @warning_color dark)

  // Purple Accent
  --accent-purple-light-bg: var(--adw-purple-3);  // #9141ac
  --accent-purple-light-fg: var(--adw-light-1);   // #ffffff
  --accent-purple-standalone: var(--adw-purple-4); // #813d9c (Standalone often one step darker/more saturated)

  --accent-purple-dark-bg: var(--adw-purple-3);   // #9141ac (Dark theme often uses same bg as light for vivid accents, or one step darker from palette if available)
  --accent-purple-dark-fg: var(--adw-light-1);    // #ffffff
  --accent-purple-dark-standalone: var(--adw-purple-1); // #dc8add (Standalone often one step lighter for dark)

  // Orange Accent
  --accent-orange-light-bg: var(--adw-orange-3);  // #ff7800
  --accent-orange-light-fg: var(--adw-light-1);   // #ffffff (or dark text if contrast is an issue, but white is common)
  --accent-orange-standalone: var(--adw-orange-4); // #e66100

  --accent-orange-dark-bg: var(--adw-orange-3);   // #ff7800
  --accent-orange-dark-fg: var(--adw-light-1);
  --accent-orange-dark-standalone: var(--adw-orange-1); // #ffbe6f

  // Teal Accent (New) - Values chosen based on typical relationships
  --accent-teal-light-bg: var(--adw-teal-3);
  --accent-teal-light-fg: var(--adw-light-1);
  --accent-teal-standalone: var(--adw-teal-4);

  --accent-teal-dark-bg: var(--adw-teal-3);
  --accent-teal-dark-fg: var(--adw-light-1);
  --accent-teal-dark-standalone: var(--adw-teal-1);

  // Pink Accent (New) - Values chosen based on typical relationships
  --accent-pink-light-bg: var(--adw-pink-3);
  --accent-pink-light-fg: var(--adw-light-1);
  --accent-pink-standalone: var(--adw-pink-4);

  --accent-pink-dark-bg: var(--adw-pink-3);
  --accent-pink-dark-fg: var(--adw-light-1);
  --accent-pink-dark-standalone: var(--adw-pink-1);

  // Brown Accent (for "Slate") - Values chosen based on typical relationships
  --accent-brown-light-bg: var(--adw-brown-3);    // #986a44
  --accent-brown-light-fg: var(--adw-light-1);    // #ffffff
  --accent-brown-standalone: var(--adw-brown-4);  // #865e3c

  --accent-brown-dark-bg: var(--adw-brown-3);     // #986a44
  --accent-brown-dark-fg: var(--adw-light-1);
  --accent-brown-dark-standalone: var(--adw-brown-1); // #cdab8f


  // Correcting standalone yellow based on direct Libadwaita values
  --accent-yellow-standalone: #9c6e03; // Official Libadwaita @warning_color Light
  --accent-yellow-dark-standalone: #f8e45c; // Official Libadwaita @warning_color Dark

  // Correcting standalone blue dark based on direct Libadwaita values
  --accent-blue-dark-standalone: #78aeed; // Official Libadwaita @accent_color Dark

  // Correcting standalone green light based on direct Libadwaita values
  --accent-green-standalone: #1b8553; // Official Libadwaita @success_color Light

  // Correcting standalone red dark based on direct Libadwaita values
  --accent-red-dark-standalone: #ff7b63; // Official Libadwaita @destructive_color Dark


  // Hover/Active states for default accents (Blue, Red)
  // Light Theme
  --accent-blue-light-bg-hover: #2a70c9; // Darker than adw-blue-3
  --accent-blue-light-bg-active: #1c58a1; // Even darker
  --accent-red-light-bg-hover: #d0121b;   // Darker than adw-red-3
  --accent-red-light-bg-active: #b00912;  // Even darker
  --accent-green-light-bg-hover: var(--adw-green-5); // #26a269
  --accent-green-light-bg-active: #1f8a5f; // Darker shade
  --accent-yellow-light-bg-hover: #d99809; // Darker than adw-yellow-5 (#e5a50a)
  --accent-yellow-light-bg-active: #c08008; // Even darker
  --accent-orange-light-bg-hover: var(--adw-orange-4); // #e66100
  --accent-orange-light-bg-active: #c64600; // var(--adw-orange-5)
  --accent-purple-light-bg-hover: var(--adw-purple-4); // #813d9c
  --accent-purple-light-bg-active: #70288a; // Darker shade
  --accent-teal-light-bg-hover: var(--adw-teal-4);
  --accent-teal-light-bg-active: var(--adw-teal-5);
  --accent-pink-light-bg-hover: var(--adw-pink-4);
  --accent-pink-light-bg-active: var(--adw-pink-5);
  --accent-brown-light-bg-hover: var(--adw-brown-4);
  --accent-brown-light-bg-active: var(--adw-brown-5);

  // Dark Theme
  --accent-blue-dark-bg-hover: #4a90e2;   // Lighter than adw-blue-3
  --accent-blue-dark-bg-active: #5f9ee5;  // Even lighter
  --accent-red-dark-bg-hover: #d02832;     // Lighter than adw-red-4
  --accent-red-dark-bg-active: #e03f49;   // Even lighter
  --accent-green-dark-bg-hover: var(--adw-green-4); // #2ec27e (Lighter than current dark bg adw-green-5)
  --accent-green-dark-bg-active: var(--adw-green-3); // #33d17a
  --accent-yellow-dark-bg-hover: #dab009; // Lighter than adw-yellow-5 (#cd9309 is current dark bg)
  --accent-yellow-dark-bg-active: #e5c00a; // Even lighter
  --accent-orange-dark-bg-hover: var(--adw-orange-2); // #ffa348 (Lighter than current dark bg adw-orange-3)
  --accent-orange-dark-bg-active: var(--adw-orange-1); // #ffbe6f
  --accent-purple-dark-bg-hover: var(--adw-purple-2); // #c061cb (Lighter than current dark bg adw-purple-3)
  --accent-purple-dark-bg-active: var(--adw-purple-1); // #dc8add
  --accent-teal-dark-bg-hover: var(--adw-teal-2);
  --accent-teal-dark-bg-active: var(--adw-teal-1);
  --accent-pink-dark-bg-hover: var(--adw-pink-2);
  --accent-pink-dark-bg-active: var(--adw-pink-1);
  --accent-brown-dark-bg-hover: var(--adw-brown-2);
  --accent-brown-dark-bg-active: var(--adw-brown-1);
}

// :root (Helper Variables) is above the mixins
// :root { ... } contains the GNOME Palette and Definitive Accent Color Variables

:root {
  // Default to DARK theme directly in :root.
  // All components should primarily use these CSS variables.
  @include dark-theme;
  // --accent-bg-color, --accent-fg-color, and --accent-color are set within the dark-theme mixin.
  // JS will override these for different accent choices.
  // Explicitly setting default accent here for clarity, matching what's in mixin.
  --accent-bg-color: var(--accent-blue-dark-bg);
  --accent-fg-color: var(--accent-blue-dark-fg);
  --accent-color: var(--accent-blue-dark-standalone); // This is the standalone color
}

body.light-theme {
  // Light theme is applied by adding .light-theme to the body.
  // This block will override the dark theme variables set in :root.
  @include light-theme;
  // Explicitly setting default accent here for clarity, matching what's in mixin.
  --accent-bg-color: var(--accent-blue-light-bg);
  --accent-fg-color: var(--accent-blue-light-fg);
  --accent-color: var(--accent-blue-standalone); // This is the standalone color
}

// Note on JavaScript interaction for theme loading (loadSavedTheme function):
// 1. Checks localStorage for 'theme'.
//    - If 'light', adds 'light-theme' to body.
//    - If 'dark', ensures 'light-theme' is NOT on body.
// 2. If no localStorage, checks `prefers-color-scheme`.
//    - If system prefers 'light', adds 'light-theme' to body.
//    - If system prefers 'dark' (or no specific preference), 'light-theme' is NOT added,
//      thus :root (dark) styles apply.
//
// The body.dark-theme selector and @media (prefers-color-scheme: dark) for :root
// are removed from here as the JS logic combined with a :root default is cleaner.


// The following @define-color rules are often used by GTK themes
// to make colors available to the GTK C API.
// We'll keep them and map them to our CSS variables.
@mixin define-gtk-colors() {
  @define-color accent_color var(--accent-color); // Standalone accent color
  @define-color accent_bg_color var(--accent-bg-color);
  @define-color accent_fg_color var(--accent-fg-color);

  @define-color destructive_color var(--destructive-color); // Standalone destructive
  @define-color destructive_bg_color var(--destructive-bg-color);
  @define-color destructive_fg_color var(--destructive-fg-color);

  @define-color success_color var(--success-color); // Standalone success
  @define-color success_bg_color var(--success-bg-color);
  @define-color success_fg_color var(--success-fg-color);

  @define-color warning_color var(--warning-color); // Standalone warning
  @define-color warning_bg_color var(--warning-bg-color);
  @define-color warning_fg_color var(--warning-fg-color);

  @define-color error_color var(--error-color);     // Standalone error
  @define-color error_bg_color var(--error-bg-color);
  @define-color error_fg_color var(--error-fg-color);

  @define-color window_bg_color var(--window-bg-color);
  @define-color window_fg_color var(--window-fg-color);
  @define-color view_bg_color var(--view-bg-color);
  @define-color view_fg_color var(--view-fg-color);

  @define-color headerbar_bg_color var(--headerbar-bg-color);
  @define-color headerbar_fg_color var(--headerbar-fg-color);
  @define-color headerbar_border_color var(--headerbar-border-color);
  @define-color headerbar_backdrop_color var(--headerbar-backdrop-color);
  @define-color headerbar_shade_color var(--headerbar-shade-color);
  @define-color headerbar_darker_shade_color var(--headerbar-darker-shade-color);

  @define-color sidebar_bg_color var(--sidebar-bg-color);
  @define-color sidebar_fg_color var(--sidebar-fg-color);
  @define-color sidebar_backdrop_color var(--sidebar-backdrop-color);
  @define-color sidebar_border_color var(--sidebar-border-color);
  @define-color sidebar_shade_color var(--sidebar-shade-color);

  @define-color secondary_sidebar_bg_color var(--secondary-sidebar-bg-color);
  @define-color secondary_sidebar_fg_color var(--secondary-sidebar-fg-color);
  @define-color secondary_sidebar_backdrop_color var(--secondary-sidebar-backdrop-color);
  @define-color secondary_sidebar_border_color var(--secondary-sidebar-border-color);
  @define-color secondary_sidebar_shade_color var(--secondary-sidebar-shade-color);

  @define-color card_bg_color var(--card-bg-color);
  @define-color card_fg_color var(--card-fg-color);
  @define-color card_shade_color var(--card-shade-color);

  @define-color popover_bg_color var(--popover-bg-color);
  @define-color popover_fg_color var(--popover-fg-color);
  @define-color popover_shade_color var(--popover-shade-color);

  @define-color dialog_bg_color var(--dialog-bg-color);
  @define-color dialog_fg_color var(--dialog-fg-color);

  @define-color thumbnail_bg_color var(--thumbnail-bg-color);
  @define-color thumbnail_fg_color var(--thumbnail-fg-color);

  @define-color borders_color var(--borders-color);
  @define-color shade_color var(--shade-color);
  @define-color scrollbar_outline_color var(--scrollbar-outline-color);
  @define-color progress_bar_track_color var(--progress-bar-track-color);
  @define-color progress_bar_fill_color var(--progress-bar-fill-color);
}

// Z-indexes
// Consider a more structured scale if many more layers are added.
$zindex-flap: 100; // For elements like sidebars that slide over content
$zindex-popover: 500; // For popovers, dropdowns
$zindex-dialog: 1000; // For modal dialogs
$zindex-dialog-backdrop: 999; // Backdrop for dialogs
$zindex-toast: 1500; // For toasts/notifications
$zindex-tooltip: 2000; // For tooltips, should be on top of almost everything


:root {
  @include define-gtk-colors();
}