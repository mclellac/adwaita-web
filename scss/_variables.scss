// scss/_variables.scss

// Adwaita-like color palette
// Light Theme
@mixin light-theme {
  --accent-bg-color: #3584e4; // Blue
  --accent-fg-color: #ffffff;
  --destructive-bg-color: #e01b24; // Red
  --destructive-fg-color: #ffffff;
  --success-bg-color: #26a269; // Green
  --success-fg-color: #ffffff;
  --warning-bg-color: #f8c443; // Yellow
  --warning-fg-color: rgba(0, 0, 0, 0.8);
  --error-bg-color: #e01b24; // Red (same as destructive)
  --error-fg-color: #ffffff;

  --window-bg-color: #f6f5f4;
  --window-fg-color: rgba(0, 0, 0, 0.8);
  --view-bg-color: #ffffff;
  --view-fg-color: rgba(0, 0, 0, 0.8);

  --headerbar-bg-color: #ebeae9;
  --headerbar-fg-color: rgba(0, 0, 0, 0.8);
  --headerbar-border-color: rgba(0, 0, 0, 0.12);
  --headerbar-backdrop-color: var(--window-bg-color);
  --headerbar-shade-color: rgba(0, 0, 0, 0.07); // For box-shadow

  --card-bg-color: #ffffff;
  --card-fg-color: rgba(0, 0, 0, 0.8);
  --card-shade-color: rgba(0, 0, 0, 0.07); // For box-shadow

  --popover-bg-color: #ffffff;
  --popover-fg-color: rgba(0, 0, 0, 0.8);
  --popover-shade-color: rgba(0, 0, 0, 0.07); // For box-shadow

  --button-bg-color: #ebeae9;
  --button-fg-color: rgba(0, 0, 0, 0.8);
  --button-border-color: rgba(0, 0, 0, 0.12);
  --button-hover-bg-color: #deddda;
  --button-active-bg-color: #d1cfce;

  --button-flat-bg-color: transparent;
  --button-flat-hover-bg-color: rgba(0, 0, 0, 0.05);
  --button-flat-active-bg-color: rgba(0, 0, 0, 0.1);

  --suggested-action-bg-color: var(--accent-bg-color);
  --suggested-action-fg-color: var(--accent-fg-color);
  --suggested-action-hover-bg-color: #2a73cc; // Darken accent
  --suggested-action-active-bg-color: #2062b5; // Further darken accent

  --destructive-action-bg-color: var(--destructive-bg-color);
  --destructive-action-fg-color: var(--destructive-fg-color);
  --destructive-action-hover-bg-color: #c91820; // Darken destructive
  --destructive-action-active-bg-color: #b2151c; // Further darken destructive

  --sidebar-bg-color: #f0efee;
  --sidebar-fg-color: rgba(0,0,0,0.8);
  --sidebar-border-color: rgba(0,0,0,0.12);
  --sidebar-shade-color: rgba(0, 0, 0, 0.07);

  --secondary-sidebar-bg-color: #e4e3e2; // Slightly darker than sidebar
  --secondary-sidebar-fg-color: rgba(0,0,0,0.8);
  --secondary-sidebar-border-color: rgba(0,0,0,0.12);
  --secondary-sidebar-shade-color: rgba(0, 0, 0, 0.07);

  --dialog-bg-color: #fdfcfb; // Slightly lighter than window
  --dialog-fg-color: rgba(0, 0, 0, 0.8);

  --thumbnail-bg-color: #ffffff; // Usually white
  --thumbnail-fg-color: rgba(0, 0, 0, 0.8);

  --shade-color: rgba(0, 0, 0, 0.07); // General purpose shade/shadow
  --scrollbar-outline-color: #ffffff;
  --link-color: var(--accent-bg-color);
  --link-visited-color: #5a5a5a; // Standard visited link color

  // Progress Bar
  --progress-bar-track-color: var(--shade-color);
  --progress-bar-fill-color: var(--accent-bg-color);
}

// Dark Theme
@mixin dark-theme {
  --accent-bg-color: #5daeff; // Lighter Blue for dark theme
  --accent-fg-color: rgba(0,0,0,0.87); // High contrast text
  --destructive-bg-color: #ff5b57; // Lighter Red
  --destructive-fg-color: rgba(0,0,0,0.87);
  --success-bg-color: #57e389; // Lighter Green
  --success-fg-color: rgba(0,0,0,0.87);
  --warning-bg-color: #f9d423; // Lighter Yellow
  --warning-fg-color: rgba(0, 0, 0, 0.87);
  --error-bg-color: #ff5b57; // Lighter Red
  --error-fg-color: rgba(0,0,0,0.87);

  --window-bg-color: #2d2d2d;
  --window-fg-color: #ffffff;
  --view-bg-color: #242424;
  --view-fg-color: #ffffff;

  --headerbar-bg-color: #3c3c3c;
  --headerbar-fg-color: #ffffff;
  --headerbar-border-color: rgba(255, 255, 255, 0.07);
  --headerbar-backdrop-color: var(--window-bg-color);
  --headerbar-shade-color: rgba(0, 0, 0, 0.36);

  --card-bg-color: #383838;
  --card-fg-color: #ffffff;
  --card-shade-color: rgba(0, 0, 0, 0.36);

  --popover-bg-color: #4a4a4a; // Darker than card for popovers
  --popover-fg-color: #ffffff;
  --popover-shade-color: rgba(0, 0, 0, 0.36);

  --button-bg-color: #4d4d4d;
  --button-fg-color: #ffffff;
  --button-border-color: rgba(255, 255, 255, 0.07);
  --button-hover-bg-color: #5a5a5a;
  --button-active-bg-color: #676767;

  --button-flat-bg-color: transparent;
  --button-flat-hover-bg-color: rgba(255, 255, 255, 0.08);
  --button-flat-active-bg-color: rgba(255, 255, 255, 0.12);

  --suggested-action-bg-color: var(--accent-bg-color);
  --suggested-action-fg-color: var(--accent-fg-color);
  --suggested-action-hover-bg-color: #4ba2ff; // Lighten accent
  --suggested-action-active-bg-color: #3b93f7; // Further lighten accent

  --destructive-action-bg-color: var(--destructive-bg-color);
  --destructive-action-fg-color: var(--destructive-fg-color);
  --destructive-action-hover-bg-color: #ff706a; // Lighten destructive
  --destructive-action-active-bg-color: #ff857f; // Further lighten destructive

  --sidebar-bg-color: #333333;
  --sidebar-fg-color: #ffffff;
  --sidebar-border-color: rgba(255,255,255,0.07);
  --sidebar-shade-color: rgba(0,0,0,0.36);

  --secondary-sidebar-bg-color: #3a3a3a; // Slightly lighter than sidebar
  --secondary-sidebar-fg-color: #ffffff;
  --secondary-sidebar-border-color: rgba(255,255,255,0.07);
  --secondary-sidebar-shade-color: rgba(0,0,0,0.36);

  --dialog-bg-color: #2f2f2f; // Slightly darker than window
  --dialog-fg-color: #ffffff;

  --thumbnail-bg-color: #242424; // Same as view
  --thumbnail-fg-color: #ffffff;

  --shade-color: rgba(0, 0, 0, 0.36); // General purpose shade/shadow
  --scrollbar-outline-color: rgba(0, 0, 0, 0.5);
  --link-color: var(--accent-bg-color);
  --link-visited-color: #c0c0c0; // Lighter visited link for dark theme

  // Progress Bar
  --progress-bar-track-color: var(--shade-color);
  --progress-bar-fill-color: var(--accent-bg-color);
}

// Helper Variables (inspired by libadwaita, but not direct libadwaita variables)
:root {
  // Font Variables (use libadwaita standard system fonts)
  --document-font-family: 'Cantarell', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  --monospace-font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
  --font-size-base: 10pt; // Base font size (libadwaita uses relative units, this is an equivalent)
  --font-size-small: 8pt;
  --font-size-large: 12pt;
  --font-size-h1: 18pt;
  --font-size-h2: 16pt;
  --font-size-h3: 14pt;
  --font-size-h4: 12pt;

  // Border Radius
  --border-radius-small: 3px;
  --border-radius-default: 6px; // Common border radius
  --border-radius-large: 12px; // For larger elements like cards or windows
  --window-radius: var(--border-radius-large); // Specific for main window corners

  // Spacing (libadwaita uses multiples of 6px and 12px often)
  --spacing-xxs: 3px;
  --spacing-xs: 6px;
  --spacing-s: 9px;
  --spacing-m: 12px;
  --spacing-l: 18px;
  --spacing-xl: 24px;
  --spacing-xxl: 36px;

  // Opacity
  --opacity-disabled: 0.5; // For disabled elements
  --opacity-hover: 0.8; // General hover opacity if not changing color
  --opacity-active: 0.6; // General active opacity if not changing color

  // Border Color (general fallback if not specified by component)
  --border-color-light: rgba(0, 0, 0, 0.12); // For light theme
  --border-color-dark: rgba(255, 255, 255, 0.07); // For dark theme

  // Accent Color Palette (Raw colors)
  // Naming: --adw-{colorName}-{shade} (shade 1-5, 3 is often a good base)
  // These are just examples, a full Adwaita palette has many more.
  --adw-blue-3: #3584e4;
  --adw-green-4: #26a269; // Using a slightly darker green for better contrast with white text
  --adw-red-3: #e01b24;   // A bit bright, consider -4 or -5 if available for general use
  --adw-yellow-3: #f8c443;
  --adw-purple-3: #800080; // Placeholder, replace with actual Adwaita purple
  --adw-orange-3: #ffa500; // Placeholder
  --adw-pink-3: #ffc0cb;   // Placeholder
  --adw-slate-3: #708090;  // Placeholder (Greys/Slates often called Stone or Iron in Adwaita)


  // Definitive Accent Color Variables (to be used by JS)
  // These provide a layer of abstraction. JS sets --accent-bg-color to one of these.

  // Light Theme Accent Palette
  --accent-blue-light-bg: var(--adw-blue-3);
  --accent-blue-light-fg: #ffffff;
  --accent-green-light-bg: var(--adw-green-4);
  --accent-green-light-fg: #ffffff;
  --accent-red-light-bg: var(--adw-red-3);
  --accent-red-light-fg: #ffffff;
  --accent-yellow-light-bg: var(--adw-yellow-3);
  --accent-yellow-light-fg: rgba(0,0,0,0.87); // Dark text for light yellow
  --accent-purple-light-bg: var(--adw-purple-3);
  --accent-purple-light-fg: #ffffff;
  --accent-orange-light-bg: var(--adw-orange-3);
  --accent-orange-light-fg: rgba(0,0,0,0.87); // Dark text for light orange
  --accent-pink-light-bg: var(--adw-pink-3);
  --accent-pink-light-fg: rgba(0,0,0,0.87);   // Dark text for light pink
  --accent-slate-light-bg: var(--adw-slate-3);
  --accent-slate-light-fg: #ffffff;

  // Dark Theme Accent Palette (values might need to be lighter/desaturated than light theme)
  --accent-blue-dark-bg: #5daeff; // Lighter blue for dark theme
  --accent-blue-dark-fg: rgba(0,0,0,0.87);
  --accent-green-dark-bg: #57e389; // Lighter green
  --accent-green-dark-fg: rgba(0,0,0,0.87);
  --accent-red-dark-bg: #ff5b57; // Lighter red
  --accent-red-dark-fg: rgba(0,0,0,0.87);
  --accent-yellow-dark-bg: #f9d423; // Lighter yellow
  --accent-yellow-dark-fg: rgba(0,0,0,0.87);
  --accent-purple-dark-bg: #c061ff; // Example: Lighter purple
  --accent-purple-dark-fg: rgba(0,0,0,0.87);
  --accent-orange-dark-bg: #ffae57; // Example: Lighter orange
  --accent-orange-dark-fg: rgba(0,0,0,0.87);
  --accent-pink-dark-bg: #ff8cc6;   // Example: Lighter pink
  --accent-pink-dark-fg: rgba(0,0,0,0.87);
  --accent-slate-dark-bg: #8a98a5;  // Example: Lighter slate
  --accent-slate-dark-fg: rgba(0,0,0,0.87);

  // Standalone accent color (e.g., for text, icons on neutral backgrounds)
  // For simplicity, these will be the same as the -bg colors for now.
  // In a full system, these would be derived (e.g., via oklab) for optimal appearance.
  --accent-blue-standalone: var(--accent-blue-light-bg);
  --accent-green-standalone: var(--accent-green-light-bg);
  --accent-red-standalone: var(--accent-red-light-bg);
  --accent-yellow-standalone: var(--accent-yellow-light-bg);
  --accent-purple-standalone: var(--accent-purple-light-bg);
  --accent-orange-standalone: var(--accent-orange-light-bg);
  --accent-pink-standalone: var(--accent-pink-light-bg);
  --accent-slate-standalone: var(--accent-slate-light-bg);

  // Dark theme standalone accents might need to be the lighter versions too
  --accent-blue-dark-standalone: var(--accent-blue-dark-bg);
  --accent-green-dark-standalone: var(--accent-green-dark-bg);
  --accent-red-dark-standalone: var(--accent-red-dark-bg);
  --accent-yellow-dark-standalone: var(--accent-yellow-dark-bg);
  --accent-purple-dark-standalone: var(--accent-purple-dark-bg);
  --accent-orange-dark-standalone: var(--accent-orange-dark-bg);
  --accent-pink-dark-standalone: var(--accent-pink-dark-bg);
  --accent-slate-dark-standalone: var(--accent-slate-dark-bg);

}

// Apply themes
:root {
  // Default to DARK theme directly in :root.
  // All components should primarily use these CSS variables.
  @include dark-theme;
  // Set initial default accent to blue (dark theme version)
  --accent-bg-color: var(--accent-blue-dark-bg);
  --accent-fg-color: var(--accent-blue-dark-fg);
  --accent-color: var(--accent-blue-dark-standalone); // Generic accent color for text/icons
}

body.light-theme {
  // Light theme is applied by adding .light-theme to the body.
  // This block will override the dark theme variables set in :root.
  @include light-theme;
  // Set initial default accent to blue (light theme version)
  // This ensures that if JS doesn't run or before it runs, the default accent matches the theme.
  // JS will then override these if a different accent is chosen via localStorage.
  --accent-bg-color: var(--accent-blue-light-bg);
  --accent-fg-color: var(--accent-blue-light-fg);
  --accent-color: var(--accent-blue-standalone);
}

// Note on JavaScript interaction for theme loading (loadSavedTheme function):
// 1. Checks localStorage for 'theme'.
//    - If 'light', adds 'light-theme' to body.
//    - If 'dark', ensures 'light-theme' is NOT on body.
// 2. If no localStorage, checks `prefers-color-scheme`.
//    - If system prefers 'light', adds 'light-theme' to body.
//    - If system prefers 'dark' (or no specific preference), 'light-theme' is NOT added,
//      thus :root (dark) styles apply.
//
// The body.dark-theme selector and @media (prefers-color-scheme: dark) for :root
// are removed from here as the JS logic combined with a :root default is cleaner.


// The following @define-color rules are often used by GTK themes
// to make colors available to the GTK C API.
// We'll keep them and map them to our CSS variables.
@mixin define-gtk-colors() {
  @define-color accent_bg_color var(--accent-bg-color);
  @define-color accent_fg_color var(--accent-fg-color);
  @define-color destructive_bg_color var(--destructive-bg-color);
  @define-color destructive_fg_color var(--destructive-fg-color);
  @define-color success_bg_color var(--success-bg-color);
  @define-color success_fg_color var(--success-fg-color);
  @define-color warning_bg_color var(--warning-bg-color);
  @define-color warning_fg_color var(--warning-fg-color);
  @define-color error_bg_color var(--error-bg-color);
  @define-color error_fg_color var(--error-fg-color);

  @define-color window_bg_color var(--window-bg-color);
  @define-color window_fg_color var(--window-fg-color);
  @define-color view_bg_color var(--view-bg-color);
  @define-color view_fg_color var(--view-fg-color);

  @define-color headerbar_bg_color var(--headerbar-bg-color);
  @define-color headerbar_fg_color var(--headerbar-fg-color);
  @define-color headerbar_border_color var(--headerbar-border-color);
  @define-color headerbar_backdrop_color var(--headerbar-backdrop-color);
  @define-color headerbar_shade_color var(--headerbar-shade-color);
  // headerbar_darker_shade_color is not a standard libadwaita concept, removing for now
  // If needed for specific effects, it can be added locally or derived.

  @define-color card_bg_color var(--card-bg-color);
  @define-color card_fg_color var(--card-fg-color);
  @define-color card_shade_color var(--card-shade-color);

  @define-color popover_bg_color var(--popover-bg-color);
  @define-color popover_fg_color var(--popover-fg-color);
  @define-color popover_shade_color var(--popover-shade-color);

  @define-color dialog_bg_color var(--dialog-bg-color);
  @define-color dialog_fg_color var(--dialog-fg-color);

  @define-color thumbnail_bg_color var(--thumbnail-bg-color);
  @define-color thumbnail_fg_color var(--thumbnail-fg-color);

  @define-color sidebar_bg_color var(--sidebar-bg-color);
  @define-color sidebar_fg_color var(--sidebar-fg-color);
  @define-color sidebar_border_color var(--sidebar-border-color);
  @define-color sidebar_shade_color var(--sidebar-shade-color);
  // sidebar_backdrop_color is not standard, removing.

  @define-color secondary_sidebar_bg_color var(--secondary-sidebar-bg-color);
  @define-color secondary_sidebar_fg_color var(--secondary-sidebar-fg-color);
  @define-color secondary_sidebar_border_color var(--secondary-sidebar-border-color);
  @define-color secondary_sidebar_shade_color var(--secondary-sidebar-shade-color);
  // secondary_sidebar_backdrop_color is not standard, removing.

  @define-color shade_color var(--shade-color);
  @define-color scrollbar_outline_color var(--scrollbar-outline-color);
  @define-color progress_bar_track_color var(--progress-bar-track-color);
  @define-color progress_bar_fill_color var(--progress-bar-fill-color);
  @define-color accent_color var(--accent-color); // For GTK mapping of the dynamic accent color

  // These are not direct libadwaita CSS variables but often derived or context-specific.
  // We'll keep the ones that are broadly applicable.
  // --active-toggle-bg-color & --active-toggle-fg-color are very specific, handle in component SCSS.
  // --overview-bg-color & --overview-fg-color are specific, handle in component/view SCSS.

  // Oklab derived colors are a more advanced GTK feature for color manipulation.
  // Libadwaita itself doesn't expose --accent-color directly in its public CSS variables,
  // it's usually derived by applications if needed.
  // For now, we will remove the oklab definitions here to keep it simpler and closer
  // to standard CSS usage. If an application needs oklab, it can define it.
}

// Apply GTK color definitions to both light and dark themes by default.
:root {
  @include define-gtk-colors();
}
// No need to re-declare for body.light-theme as :root covers it.
// The actual theme switching is handled by the @media query and body classes.

// Remove old oklab mixin and font variables that are now defined in :root
/*
:root{
  --adw-font-family: 'Cantarell', sans-serif;
  --adw-font-size: 14px;
  --adw-border-radius: 5px;
  --adw-border-width: 1px;
  --adw-padding-small: 5px;
  --adw-padding-medium: 10px;
  --adw-padding-large: 20px;
}

@mixin define-oklab-colors() {
  :root{
    --accent-color: #{oklab(from var(--accent-bg-color) max(l, 0.85) a b)};
    --destructive-color: #{oklab(from var(--destructive-bg-color) max(l, 0.85) a b)};
    --success-color: #{oklab(from var(--success-bg-color) max(l, 0.85) a b)};
    --warning-color: #{oklab(from var(--warning-bg-color) max(l, 0.85) a b)};
    --error-color: #{oklab(from var(--error-bg-color) max(l, 0.85) a b)};
  }
  body.light-theme{
    --accent-color: #{oklab(from var(--accent-bg-color) min(l, 0.5) a b)};
    --destructive-color: #{oklab(from var(--destructive-bg-color) min(l, 0.5) a b)};
    --success-color: #{oklab(from var(--success-bg-color) min(l, 0.5) a b)};
    --warning-color: #{oklab(from var(--warning-bg-color) min(l, 0.5) a b)};
    --error-color: #{oklab(from var(--error-bg-color) min(l, 0.5) a b)};
  }
}

@include define-oklab-colors();
*/