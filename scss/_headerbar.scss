@use 'variables';

.adw-header-bar {
  background-color: var(--headerbar-bg-color);
  color: var(--headerbar-fg-color);
  border-bottom: var(--border-width, 1px) solid var(--headerbar-border-color);
  padding: var(--spacing-xs) var(--spacing-m);
  display: flex;
  align-items: center;
  min-height: 48px;

  .adw-header-bar-start,
  .adw-header-bar-end {
    display: flex;
    align-items: center;
    flex-shrink: 0;

    > *, // General direct children
    adw-button, // Custom element
    a { // Links
      color: var(--headerbar-fg-color);

      &.adw-button.circular { // Specific styling for circular buttons
        padding: var(--spacing-xxs);
      }
      // .adw-avatar styling or other specific child component styling here
    }
  }

  .adw-header-bar-start {
    > *, adw-button, a { // Target all relevant children for margin
      margin-right: var(--spacing-xs);
      &:last-child {
        margin-right: 0;
      }
    }
  }

  .adw-header-bar-end {
    margin-left: auto;
    > *, adw-button, a { // Target all relevant children for margin
      margin-left: var(--spacing-xs);
      margin-right: 0; // Reset right margin
      &:first-child {
        margin-left: 0;
      }
    }
  }

  .adw-header-bar-center-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
    flex-shrink: 1;
    min-width: 0; // Essential for text-overflow ellipsis
    text-align: center;
    margin: 0 var(--spacing-m);
  }

  .adw-header-bar-title {
    font-size: var(--font-size-large);
    font-weight: bold;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.2;
  }

  .adw-header-bar-subtitle {
    font-size: var(--font-size-small);
    color: var(--headerbar-fg-color);
    opacity: 0.7;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.2;
    margin-top: 2px;
  }

  &.scrolled {
    box-shadow: 0 2px 4px -2px var(--headerbar-shade-color);
  }

  a,
  adw-button,
  .adw-button {
    // For adw-button, the component's own styling will apply.
    // However, for <a> tags or elements that *become* buttons,
    // ensuring they inherit the foreground color is important.
    color: var(--headerbar-fg-color);
    text-decoration: none;

    &:hover {
      // Define a hover state, perhaps a slight change in brightness or background
      // Depending on how adw-button handles hover, this might need adjustment
      color: var(--headerbar-fg-color);
    }
  }
}