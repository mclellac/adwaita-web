{% extends "base.html" %}
{% block dialog_mode %}true{% endblock %}
{% block title %}Register{% endblock %}

{% block header_title %}Create Account{% endblock %}

{% block content %}
<div class="auth-form-container">
    <h1 class="adw-title-1 text-center">Create a New Account</h1>

    {% if not site_settings.get('allow_registrations', False) %}
        <div class="adw-banner adw-banner-warning visible" role="alert" style="margin-bottom: var(--spacing-l);">
            <span class="adw-banner-title">User registration is currently disabled by the site administrator.</span>
        </div>
    {% else %}
        <form method="POST" action="{{ url_for('auth.register') }}" id="register-form" class="stacked-form">
            {{ form.hidden_tag() }} {# CSRF token #}

            <div class="adw-list-box" role="group" aria-labelledby="register-group-title">
                {# Full Name (Display Name) Field #}
                <div class="adw-entry-row {{ 'error' if form.full_name.errors else '' }}">
                    <label for="{{ form.full_name.id or 'full_name_input' }}" class="adw-entry-row__title">{{ form.full_name.label.text }}</label>
                    <input type="text"
                           name="{{ form.full_name.name }}"
                           id="{{ form.full_name.id or 'full_name_input' }}"
                           class="adw-entry adw-entry-row__entry"
                           required
                           placeholder="Your preferred display name"
                           value="{{ form.full_name.data or '' }}">
                </div>
                {% if form.full_name.errors %}
                    <div class="adw-row">
                        <span class="adw-caption destructive-text">{{ form.full_name.errors|join(' ') }}</span>
                    </div>
                {% endif %}

                {# Email (Username) Field #}
                <div class="adw-entry-row {{ 'error' if form.email.errors else '' }}">
                    <label for="{{ form.email.id or 'email_input' }}" class="adw-entry-row__title">{{ form.email.label.text }}</label>
                    <input type="email"
                           name="{{ form.email.name }}"
                           id="{{ form.email.id or 'email_input' }}"
                           class="adw-entry adw-entry-row__entry"
                           required
                           placeholder="your.email@example.com"
                           value="{{ form.email.data or '' }}">
                </div>
                {% if form.email.errors %}
                    <div class="adw-row">
                        <span class="adw-caption destructive-text">{{ form.email.errors|join(' ') }}</span>
                    </div>
                {% endif %}

                {# Password Field #}
                <div class="adw-entry-row {{ 'error' if form.password.errors else '' }}">
                    <label for="{{ form.password.id or 'password_input' }}" class="adw-entry-row__title">{{ form.password.label.text }}</label>
                    <input type="password"
                           name="{{ form.password.name }}"
                           id="{{ form.password.id or 'password_input' }}"
                           class="adw-entry adw-entry-row__entry"
                           required
                           placeholder="Choose a strong password (min. 8 characters)">
                </div>
                {% if form.password.errors %}
                    <div class="adw-row">
                        <span class="adw-caption destructive-text">{{ form.password.errors|join(' ') }}</span>
                    </div>
                {% endif %}

                {# Confirm Password Field #}
                <div class="adw-entry-row {{ 'error' if form.confirm_password.errors else '' }}">
                    <label for="{{ form.confirm_password.id or 'confirm_password_input' }}" class="adw-entry-row__title">{{ form.confirm_password.label.text }}</label>
                    <input type="password"
                           name="{{ form.confirm_password.name }}"
                           id="{{ form.confirm_password.id or 'confirm_password_input' }}"
                           class="adw-entry adw-entry-row__entry"
                           required
                           placeholder="Confirm your password">
                </div>
                {% if form.confirm_password.errors %}
                    <div class="adw-row">
                        <span class="adw-caption destructive-text">{{ form.confirm_password.errors|join(' ') }}</span>
                    </div>
                {% endif %}
            </div>

            <div class="adw-box horizontal justify-end" style="margin-top: var(--spacing-m);">
                <button type="submit" class="adw-button suggested-action">{{ form.submit.label.text }}</button>
            </div>
        </form>

        <div class="adw-box horizontal justify-center" style="margin-top: var(--spacing-m);">
            <a href="{{ url_for('auth.login') }}" class="adw-link">Already have an account? Log in</a>
        </div>
    {% endif %}
</div>
{% endblock %}
