{% extends "base.html" %}

{% block title %}Followers of {{ user_profile.full_name or ('User ' ~ user_profile.id) }}{% endblock %}

{% block header_title %}Followers of {{ user_profile.full_name or ('User ' ~ user_profile.id) }}{% endblock %}

{% block content %}
<div class="adw-clamp adw-clamp-lg"> {# Wider clamp for user lists potentially #}
    {% if users_list and users_list|length > 0 %}
        <div class="adw-list-box user-list-container">
            {% for listed_user in users_list %}
            <div class="adw-action-row user-list-item-row">
                <div class="adw-action-row-start-content">
                    <a href="{{ url_for('profile.view_profile', user_id=listed_user.id) }}">
                        <span class="adw-avatar size-m">
                            {% if listed_user.profile_photo_url %}
                            <img src="{{ url_for('static', filename=listed_user.profile_photo_url) }}" alt="{{ listed_user.full_name or ('User ' ~ listed_user.id) }} avatar">
                            {% else %}
                            <img src="{{ default_avatar_url }}" alt="{{ listed_user.full_name or ('User ' ~ listed_user.id) }} default avatar">
                            {% endif %}
                        </span>
                    </a>
                </div>
                <div class="adw-action-row-text-content">
                    <a href="{{ url_for('profile.view_profile', user_id=listed_user.id) }}" class="adw-link">
                        <span class="adw-action-row-title">{{ listed_user.full_name or ('User ' ~ listed_user.id) }}</span>
                    </a>
                    {# Removed @username subtitle as it was showing email. If a handle/mention is desired here, it should be @full_name or a dedicated handle field if that were used. For now, full_name is primary. #}
                </div>
                <div class="adw-action-row-end-content">
                    {% if current_user.is_authenticated and current_user != listed_user %}
                        {% if current_user.is_following(listed_user) %}
                            <form action="{{ url_for('profile.unfollow_user', user_id=listed_user.id) }}" method="POST" style="display: inline;">
                                {{ unfollow_form.hidden_tag() }}
                                {{ unfollow_form.submit(class="adw-button small") }}
                            </form>
                        {% else %}
                            <form action="{{ url_for('profile.follow_user', user_id=listed_user.id) }}" method="POST" style="display: inline;">
                                {{ follow_form.hidden_tag() }}
                                {{ follow_form.submit(class="adw-button small suggested-action") }}
                            </form>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>

        {# Pagination Controls #}
        {% if pagination and pagination.pages > 1 %}
        <div class="adw-box adw-box-horizontal list-pagination-box">
            {{ render_pagination(pagination, 'profile.followers_list', user_id=user_profile.id) }}
        </div>
        {% endif %}

    {% else %}
        <div class="adw-status-page">
            <span class="adw-icon icon-status-user-offline-symbolic adw-status-page-icon app-status-page-icon"></span> {# Example icon #}
            <h3 class="adw-status-page-title">{{ user_profile.full_name or ('User ' ~ user_profile.id) }} has no followers yet.</h3>
            {# <p class="adw-status-page-description">Check back later!</p> #}
        </div>
    {% endif %}
</div>
{% endblock %}
