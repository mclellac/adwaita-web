{% extends "base.html" %}

{% block title %}Edit Post: {{ post.title }}{% endblock %}

{% block content %}
<div class="main-content-clamped">
    <h2>Edit Post</h2>
    <form method="POST" action="{{ url_for('edit_post', post_id=post.id) }}" novalidate>
        {{ form.hidden_tag() }} {# CSRF token #}

        <adw-entry-row
            title="{{ form.title.label.text }}"
            name="{{ form.title.name }}"
            id="{{ form.title.id or 'title_field' }}"
            value="{{ form.title.data or '' }}"
            placeholder="Enter post title"
            {% if form.title.flags.required %}required{% endif %}
            style="margin-bottom: var(--spacing-s);">
        </adw-entry-row>
        {% if form.title.errors %}
            <div id="{{ form.title.id or 'title_field' }}-errors" class="errors" style="color: var(--error-color); font-size: var(--font-size-small); margin-top: var(--spacing-xs); margin-bottom: var(--spacing-m);">
                {% for error in form.title.errors %}<span>{{ error }}</span><br>{% endfor %}
            </div>
        {% else %}
            <div style="margin-bottom: var(--spacing-m);"></div> {# Maintain spacing even if no error #}
        {% endif %}

        <div class="form-group"> {# Keep .form-group for overall spacing if needed, or remove if adw-box handles it #}
            {{ form.content.label(for=form.content.id or 'content_field', class_='adw-label') }} {# Add adw-label class to label #}
            {{ form.content(class_='adw-entry', rows='15', id=form.content.id or 'content_field', placeholder='Write your blog post here...', style='width: 100%; display: block; margin-top: var(--spacing-xs);') }}
            {% if form.content.errors %}
                <div id="{{ form.content.id or 'content_field' }}-errors" class="errors" style="color: var(--error-color); font-size: var(--font-size-small); margin-top: var(--spacing-xs); margin-bottom: var(--spacing-m);">
                    {% for error in form.content.errors %}<span>{{ error }}</span><br>{% endfor %}
                </div>
            {% else %}
                <div style="margin-bottom: var(--spacing-m);"></div> {# Maintain spacing even if no error #}
            {% endif %}
        </div>

        <div class="form-button-container">
            {{ form.submit(class_='adw-button suggested-action', value='Update Post') }}
            {# The default label for SubmitField is 'Submit Post', override if needed #}
            {# Or, if you named your submit field 'update_post' in the form, it would be form.update_post #}
            <a href="{{ url_for('view_post', post_id=post.id) }}" class="adw-button">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
