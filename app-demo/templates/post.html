{% extends "base.html" %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
    <div class="content-clamp">
        <adw-preferences-page>
            <adw-preferences-group>
                <adw-expander-row title="{{ post.title }}">
                <p class="text-muted" style="font-size: 0.9em; margin-bottom: 10px;">
                    By: {{ post.author.username if post.author else 'Unknown Author' }}
                </p>
                <div class="adw-row" style="margin-bottom: 10px;"> {# Added margin-bottom for spacing #}
                    <small class="adw-label" style="font-size: 0.85em; color: var(--secondary-text-color, #555);"> {# Used secondary text color variable if available, or fallback #}
                        Posted on: {{ post.created_at.strftime('%Y-%m-%d %H:%M') if post.created_at else 'N/A' }} UTC
                        {% if post.updated_at and post.updated_at != post.created_at %}
                            (Last updated: {{ post.updated_at.strftime('%Y-%m-%d %H:%M') if post.updated_at else 'N/A' }} UTC)
                        {% endif %}
                    </small>
                </div>
                <p>{{ post.content }}</p>
            </adw-expander-row>

            {% if post.author == current_user %}
            <div class="adw-box adw-box-spacing-s" style="margin-top: 20px; padding-left: var(--spacing-m); padding-right: var(--spacing-m);"> {# Changed to adw-box for layout #}
                <form method="POST" action="{{ url_for('delete_post', post_id=post.id) }}" onsubmit="return confirm('Are you sure you want to delete this post?');">
                    <adw-button type="submit" appearance="destructive">Delete Post</adw-button>
                </form>
                <adw-button href="{{ url_for('edit_post', post_id=post.id) }}">Edit Post</adw-button>
            </div>
            {% endif %}
        </adw-preferences-group>
        <adw-button-row>
             <adw-button href="{{ url_for('index') }}">Back to Posts</adw-button> {# Changed appearance from destructive #}
        </adw-button-row>
    </adw-preferences-page>
</div>
{% endblock %}
