{% extends "base.html" %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<div class="main-content-clamped post-view-container">
    <h1>{{ post.title }}</h1>

    <div class="post-meta-detail" style="margin-bottom: var(--spacing-l); color: var(--adw-secondary-text-color, #555);">
        <p style="margin-bottom: var(--spacing-xxs);">By: {{ post.author.username if post.author else 'Unknown Author' }}</p>
        <p style="font-size: 0.9em;">
            <small>Posted on: {{ post.created_at.strftime('%Y-%m-%d %H:%M') if post.created_at else 'N/A' }} UTC</small>
            {% if post.updated_at and post.updated_at != post.created_at %}
                <br><small>(Last updated: {{ post.updated_at.strftime('%Y-%m-%d %H:%M') if post.updated_at else 'N/A' }} UTC)</small>
            {% endif %}
        </p>
    </div>

    <div class="post-content" style="margin-bottom: var(--spacing-xl);">
        {{ post.content | safe }}
    </div>

    {% if post.author == current_user %}
    <div class="form-button-container" style="margin-top: var(--spacing-xl); margin-bottom: var(--spacing-l);"> {# Re-using form-button-container for consistency #}
        <form method="POST" action="{{ url_for('delete_post', post_id=post.id) }}" onsubmit="return confirm('Are you sure you want to delete this post?');" style="display: inline;">
            <adw-button type="submit" appearance="destructive">Delete Post</adw-button>
        </form>
        <adw-button href="{{ url_for('edit_post', post_id=post.id) }}">Edit Post</adw-button>
    </div>
    {% endif %}

    <div class="adw-box justify-center" style="margin-top: var(--spacing-l);">
         <adw-button href="{{ url_for('index') }}">Back to Posts</adw-button>
    </div>
</div>
{% endblock %}
