{% extends "base.html" %}
{% block title %}Login{% endblock %}
{% block content %}
<div class="main-content-clamped">
    <h2>Login</h2>
    {% if error %}
        {# Flash messages will handle general errors like 'Invalid username or password' #}
        {# Specific field errors will be shown below the fields #}
    {% endif %}
    <form method="post" action="{{ url_for('login') }}" novalidate>
        {{ form.hidden_tag() }} {# CSRF token and other hidden fields #}

        <div class="form-group">
            {{ form.username.label(for=form.username.id or 'username_field') }}
            {{ form.username(class_='adw-entry', id=form.username.id or 'username_field', **{'aria-describedby': form.username.id ~ '-errors' if form.username.errors else None}) }}
            {% if form.username.errors %}
                <div id="{{ form.username.id or 'username_field' }}-errors" class="errors" style="color: var(--error-color); font-size: var(--font-size-small); margin-top: var(--spacing-xs);">
                    {% for error in form.username.errors %}<span>{{ error }}</span><br>{% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="form-group">
            {{ form.password.label(for=form.password.id or 'password_field') }}
            {{ form.password(class_='adw-entry', id=form.password.id or 'password_field', **{'aria-describedby': form.password.id ~ '-errors' if form.password.errors else None}) }}
            {% if form.password.errors %}
                <div id="{{ form.password.id or 'password_field' }}-errors" class="errors" style="color: var(--error-color); font-size: var(--font-size-small); margin-top: var(--spacing-xs);">
                    {% for error in form.password.errors %}<span>{{ error }}</span><br>{% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="form-button-container">
             {{ form.submit(class_='adw-button suggested-action') }}
        </div>
    </form>
</div>
{% endblock %}
