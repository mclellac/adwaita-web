{% extends "base.html" %}
{% block title %}Login{% endblock %}

{% block content %}
<div style="display: flex; justify-content: center; align-items: center; min-height: 70vh; padding-top: var(--spacing-xxl); padding-bottom: var(--spacing-xxl);">
  <div style="width: 400px; display: flex; flex-direction: column; gap: var(--spacing-lg);"> {# Outer container for centering and width, with gap for button spacing #}
    <h2 style="text-align: center; font-size: var(--font-size-h1);">Login</h2>

    {# Flashed messages will be handled by base.html's script #}
    {% with messages = get_flashed_messages(with_categories=true) %}
      {# This block itself doesn't render anything visible here #}
    {% endwith %}

    <form method="POST" action="{{ url_for('login') }}" id="login-form" style="display: flex; flex-direction: column; gap: var(--spacing-m);">
      {{ form.hidden_tag() }} {# CSRF token #}

      <adw-preferences-group title="Account Credentials">
        {# Username Field #}
        <adw-entry-row title="{{ form.username.label.text }}"
                         name="{{ form.username.name }}"
                         id="{{ form.username.id or 'username' }}"
                         required {# Assuming username is required by the form #}
                         placeholder="Enter your username"
                         value="{{ form.username.data or '' }}" {# Pre-fill if needed, though not typical for login username #}
                         subtitle="{{ form.username.errors|join(' ') if form.username.errors else '' }}"
                         class="{{ 'has-error' if form.username.errors else '' }}">
          {# Do NOT render {{ form.username() }} here if adw-entry-row is form-associated #}
        </adw-entry-row>

        {# Password Field - Use adw-password-entry-row #}
        <adw-password-entry-row title="{{ form.password.label.text }}"
                                name="{{ form.password.name }}"
                                id="{{ form.password.id or 'password' }}"
                                required {# Assuming password is required by the form #}
                                placeholder="Enter your password"
                                subtitle="{{ form.password.errors|join(' ') if form.password.errors else '' }}"
                                class="{{ 'has-error' if form.password.errors else '' }}">
          {# Do NOT render {{ form.password() }} here; adw-password-entry-row provides its own input #}
        </adw-password-entry-row>
      </adw-preferences-group>

      {{ form.submit(class="adw-button suggested", style="width: 100%; margin-top: var(--spacing-m);") }}
    </form>
  </div>
</div>
{% endblock %}
