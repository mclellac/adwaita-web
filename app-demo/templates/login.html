{% extends "base.html" %}
{% block title %}Login{% endblock %}

{% block content %}
<div style="display: flex; justify-content: center; align-items: center; min-height: 70vh; padding-top: var(--spacing-xxl); padding-bottom: var(--spacing-xxl);">
  <div style="width: 400px; display: flex; flex-direction: column; gap: var(--spacing-lg);"> {# Outer container for centering and width, with gap for button spacing #}
    <h2 style="text-align: center; font-size: var(--font-size-h1);">Login</h2>

    {# Flashed messages will be handled by base.html's script #}
    {% with messages = get_flashed_messages(with_categories=true) %}
      {# This block itself doesn't render anything visible here #}
    {% endwith %}

    <form method="POST" action="{{ url_for('login') }}" id="login-form" style="display: flex; flex-direction: column; gap: var(--spacing-m);">
      {{ form.hidden_tag() }} {# CSRF token #}

      <div class="adw-preferences-group" role="group" aria-labelledby="login-group-title">
        <div class="adw-preferences-group__title-container">
             <h3 class="adw-preferences-group__title" id="login-group-title">Account Credentials</h3>
        </div>

        {# Username Field #}
        <div class="adw-entry-row {{ 'has-error' if form.username.errors else '' }}">
          <div class="adw-entry-row-text-content">
            <label for="{{ form.username.id or 'username_input' }}" class="adw-entry-row-title">{{ form.username.label.text }}</label>
            {% if form.username.errors %}
              <div class="adw-entry-row-subtitle error-text">{{ form.username.errors|join(' ') }}</div>
            {% endif %}
          </div>
          <input type="text"
                 name="{{ form.username.name }}"
                 id="{{ form.username.id or 'username_input' }}"
                 class="adw-entry row-input"
                 required
                 placeholder="Enter your username"
                 value="{{ form.username.data or '' }}">
        </div>

        {# Password Field #}
        <div class="adw-entry-row {{ 'has-error' if form.password.errors else '' }}">
          <div class="adw-entry-row-text-content">
            <label for="{{ form.password.id or 'password_input' }}" class="adw-entry-row-title">{{ form.password.label.text }}</label>
            {% if form.password.errors %}
              <div class="adw-entry-row-subtitle error-text">{{ form.password.errors|join(' ') }}</div>
            {% endif %}
          </div>
          <input type="password"
                 name="{{ form.password.name }}"
                 id="{{ form.password.id or 'password_input' }}"
                 class="adw-entry row-input"
                 required
                 placeholder="Enter your password">
        </div>
      </div>

      <button type="submit" class="adw-button suggested-action" style="width: 100%; margin-top: var(--spacing-m);">{{ form.submit.label.text }}</button>
    </form>
  </div>
</div>
{# Removed JavaScript for Enter key handling as it relied on adw-web component internals #}
{% endblock %}
