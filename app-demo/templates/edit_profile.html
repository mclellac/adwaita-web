{% extends "base.html" %}
{% block title %}Edit Profile - {{ super() }}{% endblock %}
{% block content %}
<div class="content-clamp">
    <adw-preferences-page> {# No 'clamped' class here, as content-clamp div handles it #}
        <adw-preferences-group title="Edit Profile">
            <form method="POST" action="{{ url_for('edit_profile') }}" enctype="multipart/form-data">
                <adw-list-box style="margin-bottom: var(--spacing-m);">
                    {# File input within an adw-action-row or similar #}
                    <adw-action-row title="Profile Photo">
                        {# Subtitle can show current photo name or status #}
                        <input id="profile_photo" type="file" name="profile_photo" accept="image/*" class="adw-entry">
                        {# Styling might be needed for file inputs to look good.
                           Alternatively, a button that triggers a hidden file input.
                           The 'adw-entry' class might not be ideal for file inputs.
                           For now, let's use it and see.
                        #}
                    </adw-action-row>
                    {% if user_profile.profile_photo_url %}
                    <adw-action-row subtitle="Current Photo">
                        <img src="{{ url_for('static', filename=user_profile.profile_photo_url) }}" alt="Current profile photo" style="max-width: 100px; max-height: 100px; border-radius: var(--border-radius-default);">
                    </adw-action-row>
                    {% endif %}

                    {# Textarea for profile_info. AdwExpanderRow might be good if content can be long #}
                    <adw-expander-row title="Profile Information" subtitle="Tell us about yourself">
                        <textarea name="profile_info" class="adw-entry" rows="5" style="width: 100%;">{{ user_profile.profile_info if user_profile.profile_info else '' }}</textarea>
                    </adw-expander-row>
                </adw-list-box>

                <adw-button type="submit" appearance="suggested">Save Changes</adw-button>
                <adw-button href="{{ url_for('profile', username=user_profile.username) }}" style="margin-left: var(--spacing-s);">Cancel</adw-button>
            </form>
        </adw-preferences-group>
    </adw-preferences-page>
</div>
{% endblock %}
