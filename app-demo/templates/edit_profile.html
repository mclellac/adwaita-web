{% extends "base.html" %}
{% block title %}Edit Profile - {{ super() }}{% endblock %}
{% block content %}
<div class="main-content-clamped">
    <h2>Edit Profile</h2>
    <form method="POST" action="{{ url_for('edit_profile') }}" enctype="multipart/form-data">
        <adw-expander-row title="Profile Information">
            <textarea name="profile_info" id="profile_info_field" class="adw-entry" rows="8">{{ current_user.profile_info or '' }}</textarea>
        </adw-expander-row>

        <adw-action-row title="Profile Photo" subtitle="{{ 'Change photo' if current_user.profile_photo_url else 'Upload new photo' }}">
            {% if current_user.profile_photo_url %}
            <span slot="prefix" class="adw-avatar size-large" style="margin-right: 12px; --adw-avatar-size: 48px;">
                <img src="{{ url_for('static', filename=current_user.profile_photo_url) }}" alt="Current profile photo" style="width: 100%; height: 100%; object-fit: cover;">
            </span>
            {% endif %}
            <label for="profile_photo_field" class="adw-button" slot="suffix" style="align-self: center; margin: 0; cursor: pointer;">Upload Photo</label>
            <input type="file" name="profile_photo" id="profile_photo_field" accept="image/*" style="display: none;">
        </adw-action-row>

        <div class="form-button-container">
            <adw-button type="submit" appearance="suggested">Save Profile</adw-button>
            <adw-button href="{{ url_for('profile', username=current_user.username) }}">Cancel</adw-button>
        </div>
    </form>
</div>
{% endblock %}
