<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adwaita Web</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app"></div>

    <script src="js/components.js"></script>
    <script>
        // --- Header Bar ---
        const themeButton = Adw.createButton("Toggle Theme", {
            onClick: Adw.toggleTheme,
        });

        const headerBar = Adw.createHeaderBar({
            title: "Adwaita Widgets",
            subtitle: "Demonstration",
            start: [Adw.createButton("<", { href: "#" })],
            end: [themeButton, Adw.createButton("â˜°", { onClick: () => alert("Menu clicked") })],
        });

        // --- Buttons ---
        const button = Adw.createButton('Click Me!', {
            onClick: () => Adw.createToast("Button Clicked", {timeout: 3000}),
        });
        const suggestedButton = Adw.createButton('Suggested', {
            onClick: () => Adw.createToast("Suggested Button Clicked"),
            suggested: true
        });
        const destructiveButton = Adw.createButton('Delete', {
            onClick: () => Adw.createToast("Destructive Button Clicked"),
            destructive: true, // Will now use .destructive-action
        });
        const disabledButton = Adw.createButton('Disabled', {
            onClick: () => alert("This shouldnt be clickable!"),
            disabled: true
        });
        const flatButton = Adw.createButton('Flat Button', {
            onClick: () => alert('Flat Button clicked!'),
            flat: true
        });
        // New button examples
        const iconButton = Adw.createButton('With Icon', {
            icon: '<svg width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0ZM7 11.5a1 1 0 1 1 2 0a1 1 0 0 1-2 0Zm.5-7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5Z"/></svg>', // Simple placeholder SVG
            onClick: () => Adw.createToast("Icon Button Clicked")
        });
        const circularButton = Adw.createButton('', {
            icon: '<svg width="16" height="16" viewBox="0 0 16 16"><path fill="currentColor" d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385C2.49 8.673 3.25 9.776 4.138 10.737MB8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15"/></svg>', // Placeholder heart SVG
            isCircular: true,
            onClick: () => Adw.createToast("Circular Button Clicked")
        });


        const buttonsBox = Adw.createBox({
            orientation: 'horizontal',
            spacing: "s", // Demonstrate spacing on box
            children: [button, suggestedButton, destructiveButton, disabledButton, flatButton, iconButton, circularButton]
        });

        // --- Entry ---
        const entry = Adw.createEntry({
            placeholder: 'Enter text...',
            onInput: (e) => console.log('Input:', e.target.value),
        });
        const disabledEntry = Adw.createEntry({
          placeholder: "Disabled entry...",
          disabled: true
        });
        const entryBox = Adw.createBox({
            orientation: 'horizontal',
            children: [
                Adw.createRow({ children: [Adw.createLabel("Entry:"), entry] }),
                Adw.createRow({ children: [Adw.createLabel("Disabled Entry: "), disabledEntry]})
            ]
        })

        // --- Switch ---
        const switchEl = Adw.createSwitch({
          onChanged: (e) => console.log("switch is: ", e.target.checked),
          checked: true
        });
        const disabledSwitchEl = Adw.createSwitch({
            onChanged: (e) => console.log("switch is: ", e.target.checked),
            disabled: true
          });
        const switchBox = Adw.createBox({
            orientation: 'horizontal',
            children: [
              Adw.createRow({ children: [Adw.createLabel("Switch: "), switchEl] }),
              Adw.createRow({ children: [Adw.createLabel("Disabled Switch: "), disabledSwitchEl] })
            ]
        })

        // --- Labels ---
        const label = Adw.createLabel("This is a label", {isBody: true});
        const labelTitle1 = Adw.createLabel("Title 1", {title: 1});
        const labelTitle2 = Adw.createLabel("Title 2", {title: 2});
        const labelTitle3 = Adw.createLabel("Title 3", {title: 3});
        const labelTitle4 = Adw.createLabel("Title 4", {title: 4});
        const labelCaption = Adw.createLabel("Caption", {isCaption: true});

        // --- Dialog (Example Usage) ---
        const openDialogButton = Adw.createButton('Open Dialog', {
          onClick: () => {
            const dialogContent = Adw.createBox({
              orientation: 'vertical',
              children: [
                Adw.createLabel("This is the dialog content."),
                Adw.createEntry({ placeholder: "Dialog Entry" }),
              ]
            });

            const dialog = Adw.createDialog({
              title: "Example Dialog",
              content: dialogContent,
              buttons: [
                Adw.createButton("Cancel", { onClick: () => dialog.close() }),
                Adw.createButton("OK", { suggested: true, onClick: () => {
                  Adw.createToast("OK clicked");
                  dialog.close();
                } }),
              ]
            });
            dialog.open(); // Open the dialog (it's now appended to the body in components.js)
          }
        });

        // --- Progress Bar ---
          const progressBar = Adw.createProgressBar({value: 50});
          const disabledProgressBar = Adw.createProgressBar({value: 75, disabled: true});
          const indeterminateProgressBar = Adw.createProgressBar({isIndeterminate: true});

        const progressBarBox = Adw.createBox({
            orientation: 'vertical', // Changed to vertical for better layout of multiple bars
            spacing: "s",
            children: [
                Adw.createRow({ children: [Adw.createLabel("Progress (50%): "), progressBar]}),
                Adw.createRow({ children: [Adw.createLabel("Disabled (75%): "), disabledProgressBar]}),
                Adw.createRow({ children: [Adw.createLabel("Indeterminate: "), indeterminateProgressBar]})
            ]
        })


        // --- Checkbox ---
        const checkbox = Adw.createCheckbox({
            label: "Enable Feature",
            onChanged: (e) => console.log("Checkbox:", e.target.checked),
        });
         const disabledCheckbox = Adw.createCheckbox({
            label: "Disabled Checkbox",
             disabled: true,
            onChanged: (e) => console.log("Checkbox:", e.target.checked),
        });
        const checkBox = Adw.createBox({
            orientation: 'horizontal',
            children: [
                Adw.createRow({ children: [checkbox]}),
                Adw.createRow({children: [disabledCheckbox]})
            ]
        })


        // --- Radio Button ---
        const radio1 = Adw.createRadioButton({
            label: "Option 1",
            name: "radioGroup",
            onChanged: (e) => console.log("Radio 1:", e.target.checked),
            checked: true,
        });

        const radio2 = Adw.createRadioButton({
            label: "Option 2",
            name: "radioGroup",
            onChanged: (e) => console.log("Radio 2:", e.target.checked),
        });
        const disabledRadio = Adw.createRadioButton({
          label: 'Disabled Radio',
          name: 'radioGroup2',
          disabled: true
        })

        const radioBox = Adw.createBox({
            orientation: 'horizontal',
            children: [
                Adw.createRow({ children: [radio1, radio2, disabledRadio] })
            ]
        })

        // --- List Box ---
        const listBox = Adw.createListBox({
            children: [
                Adw.createRow({ interactive: true, onClick: () => Adw.createToast("Row 1 Clicked"), children: [Adw.createLabel("List Item 1 (Interactive)")] }),
                Adw.createRow({ children: [Adw.createLabel("List Item 2")] , activated: true}),
                Adw.createRow({ children: [Adw.createLabel("List Item 3")] }),
            ]
        });
        const flatListBox = Adw.createListBox({
            isFlat: true,
            children: [
                Adw.createRow({ children: [Adw.createLabel("Flat Item A")] }),
                Adw.createRow({ children: [Adw.createLabel("Flat Item B")] }),
            ]
        });
        const listBoxContainer = Adw.createBox({
            orientation: 'horizontal', spacing: 'm',
            children: [
                Adw.createBox({orientation: 'vertical', children: [Adw.createLabel("Default ListBox", {title:4}), listBox]}),
                Adw.createBox({orientation: 'vertical', children: [Adw.createLabel("Flat ListBox", {title:4}), flatListBox]})
            ]
        });

        // --- ViewSwitcher Example ---
        const viewSwitcher = Adw.createViewSwitcher({
            views: [
                { name: "Page 1", content: Adw.createBox({ orientation: 'vertical', spacing: 'm', children: [Adw.createLabel("Content for Page 1"), Adw.createEntry({placeholder: "Entry on Page 1"})]}) },
                { name: "Page 2", content: Adw.createBox({ orientation: 'vertical', spacing: 'm', children: [Adw.createLabel("Some different content for Page 2"), Adw.createButton("A button")]}) },
                { name: "Page 3", content: Adw.createLabel("Final page with just a label.") }
            ],
            activeViewName: "Page 1",
            onViewChanged: (viewName) => Adw.createToast(`Switched to ${viewName}`)
        });

        // --- Flap Example ---
        const flapWidget = Adw.createFlap({
            flapContent: Adw.createBox({orientation: 'vertical', spacing:'s', children: [
                Adw.createLabel("Flap Content", {title: 4}),
                Adw.createButton("Button in Flap"),
                Adw.createLabel("More flap text here to show scrolling if needed.", {isCaption: true})
            ]}),
            mainContent: Adw.createBox({orientation: 'vertical', spacing: 's', children: [
                Adw.createLabel("Main Content Area", {title: 4}),
                Adw.createLabel("This content stays visible. The flap is to the left (or right, depending on LTR/RTL)."),
                Adw.createEntry({placeholder: "Entry in main content"})
            ]}),
            isFolded: false // Start with flap open
        });
        const toggleFlapButton = Adw.createButton("Toggle Flap", { onClick: () => flapWidget.toggleFlap() });
        const flapExampleBox = Adw.createBox({
            orientation: 'vertical', spacing: 'm',
            children: [
                toggleFlapButton,
                flapWidget.element // Add the flap element to the layout
            ]
        });


        // --- Main Content Layout ---
        const content = Adw.createBox({
            orientation: 'vertical',
            spacing: "l", // Add overall spacing to content sections
            children: [
                Adw.createLabel("Typography", {title:1}),
                Adw.createRow({ children: [labelTitle1, labelTitle2, labelTitle3, labelTitle4, label, labelCaption] }),

                Adw.createLabel("Buttons", {title:1}),
                buttonsBox,

                Adw.createLabel("Entries", {title:1}),
                entryBox,

                Adw.createLabel("Controls", {title:1}),
                switchBox,
                checkBox,
                radioBox,

                Adw.createLabel("Progress Bars", {title:1}),
                progressBarBox,

                Adw.createLabel("List Boxes", {title:1}),
                listBoxContainer, // Contains both listboxes

                Adw.createLabel("Dialog", {title:1}),
                Adw.createRow({ children: [openDialogButton] }),

                Adw.createLabel("ViewSwitcher", {title:1}),
                viewSwitcher,

                Adw.createLabel("Flap", {title:1}),
                flapExampleBox,

                Adw.createLabel("Accent Color Picker", {title:1}),
                // This will be populated by JavaScript below
            ],
        });

        // --- Accent Color Picker Example ---
        const accentPickerBox = Adw.createBox({ orientation: 'horizontal', spacing: 's', align: 'center'});
        const accentColors = Adw.getAccentColors();
        accentColors.forEach(colorName => {
            const colorButton = Adw.createButton(colorName.charAt(0).toUpperCase() + colorName.slice(1), {
                onClick: () => Adw.setAccentColor(colorName)
            });
            // Optionally, give the button a visual hint of its color
            // This is a simple way, could also use custom classes or direct CSS var access if button supported it
            try {
                // Attempt to use the SCSS variable directly for preview.
                // This requires the button to be in the DOM to resolve the var.
                // A more robust way might be to have predefined hex values for display.
                const tempAccentBgVar = `var(--accent-${colorName}-light-bg)`; // Use light version for preview consistency
                colorButton.style.setProperty('background-color', tempAccentBgVar);
                const tempAccentFgVar = `var(--accent-${colorName}-light-fg)`;
                colorButton.style.setProperty('color', tempAccentFgVar);
                 colorButton.style.setProperty('border-color', tempAccentBgVar);


            } catch (e) { console.warn("Could not apply style for accent button preview", e); }

            accentPickerBox.appendChild(colorButton);
        });
        // Find where to insert the accent picker. For now, append to the main content.
        content.appendChild(Adw.createRow({children: [accentPickerBox]}));


        // Create the window and append it to the body.
        const windowEl = Adw.createWindow({header: headerBar, content: content});
        document.getElementById('app').appendChild(windowEl);
    </script>
</body>
</html>